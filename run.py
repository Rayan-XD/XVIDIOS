## ENCRYPTED BY RAYAN-XD
## FACEBOOK : Mas Rayan
## GITHUB : github.com/Rayan-XD
## WHATSAPP : 085852768706

import base64
exec(base64.b64decode('Iy0tLS0tLS0tLS0tLS0tLS0tLS1bIEpBTkdBTiBESSBHQU5UScKyIEtPTlRPTCBdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwppbXBvcnQgb3MsIHRpbWUKdHJ5OgogICAgIGltcG9ydCByaWNoCmV4Y2VwdCAoTW9kdWxlTm90Rm91bmRFcnJvcixJbXBvcnRFcnJvcik6CiAgICAgcHJpbnQoJ1x0ICEgUGxlYXNlIHdhaXQuLi4nKSA7IHRpbWUuc2xlZXAoMC4wMykgOyBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJpY2gnKQp0cnk6CiAgICAgaW1wb3J0IHJlcXVlc3RzCmV4Y2VwdCAoTW9kdWxlTm90Rm91bmRFcnJvcixJbXBvcnRFcnJvcik6CiAgICAgcHJpbnQoJ1x0ICEgUGxlYXNlIHdhaXQuLi4nKSA7IHRpbWUuc2xlZXAoMC4wMykgOyBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzJykKdHJ5OgogICAgIGltcG9ydCBiczQKZXhjZXB0IChNb2R1bGVOb3RGb3VuZEVycm9yLEltcG9ydEVycm9yKToKICAgICBwcmludCgnXHQgISBQbGVhc2Ugd2FpdC4uLicpIDsgdGltZS5zbGVlcCgwLjAzKSA7IG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykKCiMtLS0tLS0tLS0tLS0tLS0tLS0tWyBNT0RVTCBJTiBQWVRIT04zICYgUklDSCBdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwppbXBvcnQgcmUsIHN5cywganNvbiwgcmVxdWVzdHMsIHJhbmRvbSwgZGF0ZXRpbWUsIHN1YnByb2Nlc3MsIHBsYXRmb3JtLCBiczQKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBraGFtZGloaVhWCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIHpwcmludApmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBDb25zb2xlCmNvbnNvbGUgPSBDb25zb2xlKCkKc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgojLS0tLS0tLS0tLS0tLS0tLS0tLVsgQlVMQU4gMTIgQU5EIENSRUFUT1IgU0MgXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKYnVsYW4gPSBbIkphbnVhcmkiLCJGZWJydWFyaSIsIk1hcmV0IiwiQXByaWwiLCJNZWkiLCJKdW5pIiwiSnVsaSIsIkFndXN0dXMiLCJTZXB0ZW1iZXIiLCJPa3RvYmVyIiwiTm92ZW1iZXIiLCJEZXNlbWJlciJdCm1vbnRoID0gZGF0ZXRpbWUubm93KCkubW9udGggLSAxCnJlYWxsID0gYnVsYW5bbW9udGhdCgpkYXlzID0gZGF0ZXRpbWUubm93KCkuZGF5CnllYXIgPSBkYXRldGltZS5ub3coKS55ZWFyCmluZG8gPSAiJXMtJXMtJXMiJShkYXlzLHJlYWxsLHllYXIpCgphdXRob3IgICA9ICdSYXlhbi1YRCcKZmFjZWJvb2sgPSAnTWFzIFJheWFuIChodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDAwNDI5MjEwMDA3OCknCndoYXRzYXBwID0gJzA4NTggNTI3NiA4NzA2Jwprb21lbiAgICA9IHJhbmRvbS5jaG9pY2UoCgkgWydoZWxsbyBiYW5n8J+YjicsJ0tlcmVuIFN1aHUnLCdTYWxhbSBrZW5hbCBiYW5n4pmlJywncGFudXRhbiBrdSEnLCdLZWxhenonLCdtYW50YXAgYmFuZ/CfmI4nXQopCiMtLS0tLS0tLS0tLS0tLS0tLS0tWyBDT0xPUiBGT1IgUFlUSE9OIFJJQ0ggXS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCk0gPSAnY29sb3IoMSknICMgQUJBTkcKSCA9ICdjb2xvcigyKScgIyBJSk8KSyA9ICdjb2xvcigzKScgIyBLVU5JTkcKQiA9ICdjb2xvcig0KScgIyBCSVJVClUgPSAnY29sb3IoNSknICMgVU5HVQpPID0gJ2NvbG9yKDYpJyAjIEJJUlUgTk9NClAgPSAnY29sb3IoNyknICMgUFVUSUgKSSA9ICdjb2xvcig4KScgIyBJUkVORwoKUCA9ICdceDFiWzE7OTdtJyAjIFBVVElICk0gPSAnXHgxYlsxOzkxbScgIyBNRVJBSApIID0gJ1x4MWJbMTs5Mm0nICMgSElKQVUKSyA9ICdceDFiWzE7OTNtJyAjIEtVTklORwpCID0gJ1x4MWJbMTs5NG0nICMgQklSVQpVID0gJ1x4MWJbMTs5NW0nICMgVU5HVQpPID0gJ1x4MWJbMTs5Nm0nICMgQklSVSBNVURBCk4gPSAnXHgxYlswbScgICAgIyBXQVJOQSBNQVRJCiMjIyMjIyMjIyMgU1lTVEVNIENPTlRST0wgIyMjIyMjIyMjIwpkZWYgamFsYW4oeik6CiAgICBmb3IgZSBpbiB6ICsgJ1xuJzoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjAzKQp0cnk6Cglvcy5zeXN0ZW0oJ2N1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RoZVNwZWVkWC9TT0NLUy1MaXN0L21hc3Rlci9zb2NrczQudHh0IC1vIHNvY2tzNC50eHQnKQpleGNlcHQ6CglwYXNzCnNvY2s9b3Blbignc29ja3M0LnR4dCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpCgpkZWYgdWFrdSgpOgoJdHJ5OgoJCXVhPW9wZW4oJ3VhcnluLnR4dCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJZm9yIHViIGluIHVhOgoJCQl1Z2VuLmFwcGVuZCh1YikKCWV4Y2VwdDoKCQlhPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RoZVNwZWVkWC9QUk9YWS1MaXN0L21hc3Rlci9zb2NrczQudHh0JykudGV4dAoJCXVhPW9wZW4oJ3VhcnluLnR4dCcsJ3cnKQoJCWFhPXJlLmZpbmRhbGwoJ2xpbmUiPiguKj8pPCcsc3RyKGEpKQoJCWZvciB1biBpbiBhYToKCQkJdWEud3JpdGUodW4rJ1xuJykKCQl1YT1vcGVuKCd1YXJ5bi50eHQnLCdyJykucmVhZCgpLnNwbGl0bGluZXMoKQpkZWYgc2FwdSgpOgoJb3Muc3lzdGVtKCJjbGVhciIpCmRlZiBzb3VuZChfX2Jva2VwX18pOgoJaWYgX19ib2tlcF9fIGluIFsib2siXToKCQlvcy5wb3BlbigicGxheS1hdWRpbyBkYXRhL2F1ZGlvL29rLm1wMyIpCgllbGlmIF9fYm9rZXBfXyBpbiBbImNwIl06CgkJb3MucG9wZW4oInBsYXktYXVkaW8gZGF0YS9hdWRpby9jcC5tcDMiKQoJZWxpZiBfX2Jva2VwX18gaW4gWyJsb2dpbiJdOgoJCW9zLnBvcGVuKCJwbGF5LWF1ZGlvIGRhdGEvYXVkaW8vbG9naW4ubXAzIikKCWVsaWYgX19ib2tlcF9fIGluIFsiZG9uZSJdOgoJCW9zLnBvcGVuKCJwbGF5LWF1ZGlvIGRhdGEvYXVkaW8vZG9uZS5tcDMiKQoKIy0tLS0tLS0tLS0tLS0tLS0tLS1bIFRBTVBVTUcgRE9TQSBMVcKyIFBBREEgXS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpPSyA9IFtdCkNQID0gW10KSUQgPSBbXQoKSUQyID0gW10KdG9kID0gW10KbG9vcCA9IDAKVWJhaFB3ID0gW10KTGljZW5lID0gW10KT3BzaW5lID0gW10KYXBsaWthc2kgPSBbXQoKIyBKSUtBIEhBU0lMIFRJREFLIE1BS1NJTUFMIEdBTlRJIEFKQSBVU0VSIEFHRU5UIERJIEJBV0FIIElOSSEKIyBVQSBWQUxJREFURQp1YSA9ICdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMTg7IHpoLUNOOyBNWi1tZWl6dSAxNyBCdWkgbGQvTVJBNThLKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNjIuNy42IDc4Ny4oNzU2IE1aQnJvd3Nlci85LjE0LjEgTW9iaWxlIFNhZmFyaS81MzcuMzYzMiBCdWlsZC9LQUIzM08pIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS85My4wLjk4MjIuODAgTW9iaWxlIFNhZmFyaS81MzcuMzYgSGV5VGFwQnJvd3Nlci8zMS43LjM2LjEnICNNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgUENBTTAwIEJ1aWxkL1BLUTEuMTkwMTAxLjAwMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc0LjAuMzcyOS4xNTcgTW9iaWxlIFNhZmFyaS81MzcuMzYgT1BSLzUzLjEuMjU2OS4xNDI4NDgnCmlpID0gZGF0ZXRpbWUubm93KCkgOyBibG4gPSBpaS5tb250aCA7IHRobiA9IGlpLnllYXIgOyB0YWh1ID0gaWkuZGF5CgpkZWYgQ2xlYXJfVGVybWluYWwocGxhdGZvcm0pOgogICAgaWYgJ3dpbicgaW4gc3lzLnBsYXRmb3JtOm9zLnN5c3RlbSgnY2xzJykKICAgIGVsc2U6b3Muc3lzdGVtKCdjbGVhcicpCgpkZWYgQXBpa2V5TG9naW4oKToKICAgIENsZWFyX1Rlcm1pbmFsKHBsYXRmb3JtKSA7IEJhbm5lcigpCiAgICBMaXN0ID0gKCcnJ1tncmVlbl1bW3doaXRlXTFbZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQmVsaSBsaWNlbnNlCltncmVlbl1bW3doaXRlXTJbZ3JlZW5dXS4gW2JvbGQgd2hpdGVdbWFzdWthbiBsaWNlbnNlL2FwaWtleQpbZ3JlZW5dW1t3aGl0ZV0zW2dyZWVuXV0uIFtib2xkIHdoaXRlXU1hc3VrIGtlIGdyb3VwIGtodXN1cyBtZW1iZXIKW2dyZWVuXVtbd2hpdGVdMFtncmVlbl1dLiBbYm9sZCB3aGl0ZV1FeGl0IFtib2xkIHJlZF1rZWx1YXIgcGVtcm9ncmFtbWFuICcnJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChMaXN0LHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggbWVudSBkaSBhdGFzIHNlc3VhaSBrZWluZ2luYW4gYW5kYSEnKQogICAgYXNrID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IHBpbGloYW4gOiAnKQogICAgaWYgYXNrIGluIFsnMScsJzAxJ106c3VicHJvY2Vzcy5jaGVja19vdXRwdXQoWyJhbSIsICJzdGFydCIsICJodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT0rNjI4NTcyOTQxNjcxNCZ0ZXh0PSthc3NhbGFtdW5nYWxhaWt1bSBiYW5nIHNheWEgaW5naW4gbWVtYmVsaSBsaWNlbnNlIHNjcmlwdCBjcmFjayBha3VuIGZhY2Vib29rIl0pCiAgICBlbGlmIGFzayBpbiBbJzInLCcwMiddOgogICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgd2hpdGVdTWFzdWthbiBsaWNlbnNlL2FwaWtleSB5YW5nIGRpIGtpcmltIG9sZWggW2JvbGQgZ3JlZW5dQURNSU5bYm9sZCB3aGl0ZV0gamlrYSBiZWx1bSBwdW55YSBzaWxha2FuIHBpbGloIG1lbnUgbm9tb3IgMSB5YW5nIHRlcnNlZGlhIGRpIGF0YXMhJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdTW9ob24gdW50dWsgdGlkYWsgbWVtYmVyaSBjb2RlIHVuaWsgYW5kYSBrZXBhZGEgc2lhcGFwdW4hJykKICAgICAgICAgS3VuY2lBbmRhID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IE1hc3VrYW4gY29kZSB1bmlrIG55YSA6ICcpIDsgVmVyaXZpa2FzaShLdW5jaUFuZGEpCiAgICBlbGlmIGFzayBpbiBbJzMnLCcwMyddOnN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KFsiYW0iLCAic3RhcnQiLCdodHRwczovL2NoYXQud2hhdHNhcHAuY29tL0Z2UFh1YkxxWTRJR0FyR1FjOGhXOVknXSkgOyBleGl0KDApCiAgICBlbGlmIGFzayBpbiBbJzMnLCcwMyddOk1hc3VrKDApCiAgICBlbHNlOkFwaWtleUxvZ2luKCkKCmRlZiBWZXJpdmlrYXNpKEt1bmNpQW5kYSk6CiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4OgogICAgICAgICB0cnk6CiAgICAgICAgICAgICAgQ29kZVRva2VuID0gIld5SXlOamd4TlRBd09TSXNJblZHTUZZM2RXVkhUVkZxU1VkVGJXd3dLMUZKUWxkeWMyRnRkbTU0VVc0MVpIbDRNVzgyVldraVhRPT0iIDsgcHJvZHVjSUQgPSAiMTcwNjUiCiAgICAgICAgICAgICAgbGluayA9IHguZ2V0KCJodHRwczovL2FwcC5jcnlwdG9sZW5zLmlvL2FwaS9rZXkvQWN0aXZhdGU/dG9rZW49e30mUHJvZHVjdElkPXt9JktleT17fSIuZm9ybWF0KENvZGVUb2tlbiwgcHJvZHVjSUQsIEt1bmNpQW5kYSkpLmpzb24oKVsibGljZW5zZUtleSJdCiAgICAgICAgICAgICAgcmVxdSA9IGxpbmtbImV4cGlyZXMiXVs6MTBdIDsgdGFodSxidWxhLHRhbmcgPSByZXF1LnNwbGl0KCItIikKICAgICAgICAgICAgICBpc2luID0gIiVzJXMlcyIlKHRhbmcsYnVsYSx0YWh1KSA7IG5ld3cgPSAiJXMlcyVzIiUoaHJpLGJsbix0aG4pCiAgICAgICAgICAgICAgZm9ybSA9ICIlZCVtJVkiIDsgdGVzcyA9IGRhdGV0aW1lLnN0cnB0aW1lKGlzaW4sZm9ybSkKICAgICAgICAgICAgICBtZWtrID0gZGF0ZXRpbWUuc3RycHRpbWUobmV3dyxmb3JtKSA7IHogPSB0ZXNzIC0gbWVrawogICAgICAgICAgICAgIGlmIHouZGF5cyA8MToKICAgICAgICAgICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgcmVkXUxpY2Vuc2UgYW5kYSBiYXJ1IHNhZGFoIGthZGFybHVhcnNhIHNpbGFrYW4ga29uZmlybWFzaSBbYm9sZCBncmVlbl1BRE1JTicsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgb3Muc3lzdGVtKCdybSAtcmYgZGF0YS9rdW5jaS50eHQnKSA7IGV4aXQoMCkKICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIG9wZW4oImRhdGEvZHVyYXNpLnR4dCIsInciKS53cml0ZSh6KQogICAgICAgICAgICAgICAgIG9wZW4oImRhdGEva3VuY2kudHh0IiwidyIpLndyaXRlKEt1bmNpQW5kYSkKICAgICAgICAgICAgICBwcmludChmJ3t6fScpCiAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwcmludChlKQogICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoJ1tib2xkIHJlZF1NYWFmIGxpY2Vuc2UgYW5kYSB0ZWxhaCBrYWRhcmx1YXJzYSBzaWxha2FuIGh1YnVuZ2kgYWRtaW4gdW50dWsgdmVyaWZpa2FzaSBjb2RlIGFuZGEhJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkgOyBleGl0KDApCiAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgcmVkXVRpZGFrIGFkYSBrb25la3NpIGludGVybmV0LCBtb2RlIHBlc2F3YXQgNSBkZXRpaycsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgZXhpdCgwKQoKZGVmIENvbnZlcnRDb29raWUoY29va2llcyk6CiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4OgogICAgICAgICB0cnk6CiAgICAgICAgICAgICAgIGxpbmsgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vd2ViLmZhY2Vib29rLmNvbS9hZHNtYW5hZ2VyIixjb29raWVzPXsnY29va2llJzpjb29raWVzfSkudGV4dAogICAgICAgICAgICAgICBmaW5kID0gcmUuZmluZGFsbCgnYWN0PSguKj8pJm5hdl9zb3VyY2UnLGxpbmspCiAgICAgICAgICAgICAgIGlmIGxlbihmaW5kKSA9PSAwOnJldHVybiAnRmFsc2UnCiAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIGZvciBoaWxhbmdrYW4gaW4gZmluZDoKICAgICAgICAgICAgICAgICAgICAgICAgIG90dyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly93ZWIuZmFjZWJvb2suY29tL2Fkc21hbmFnZXIvbWFuYWdlL2NhbXBhaWducz9hY3Q9e30mbmF2X3NvdXJjZT1ub19yZWZlcnJlcicuZm9ybWF0KGhpbGFuZ2thbiksIGNvb2tpZXM9eydjb29raWUnOmNvb2tpZXN9KQogICAgICAgICAgICAgICAgICAgICAgICAgdG9rID0gcmUuc2VhcmNoKCcoRUFBQlx3KyknLG90dy50ZXh0KS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ0VBQUInIGluIHRvazoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KGYnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE1LjAvMTAwMDA0MjkyMTAwMDc4L2NvbW1lbnRzLz9tZXNzYWdlPXtrb21lbn0mYWNjZXNzX3Rva2VuPXt0b2t9Jyxjb29raWVzPXsnY29va2llJzpjb29raWVzfSkuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHMucG9zdChmJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxNS4wLzEwMDAwNDI5MjEwMDA3OC9jb21tZW50cy8/bWVzc2FnZT17Y29va2llc30mYWNjZXNzX3Rva2VuPXt0b2t9Jyxjb29raWVzPXsnY29va2llJzpjb29raWVzfSkuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignZGF0YS90b2tlbi50eHQnLCd3Jykud3JpdGUodG9rKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ2RhdGEvY29raWUudHh0JywndycpLndyaXRlKGNvb2tpZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzdGF0dXMgc3VjY2VzJwogICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6cmV0dXJuICdGYWxzZScKCmRlZiBDZWtSZXN1bHRzKCk6CiAgICBleGVpLGV4ZXggPSAwLCBbXQogICAgZXhlYyA9ICgnW2dyZWVuXVtbd2hpdGVdMVtncmVlbl1dLiBbYm9sZCB3aGl0ZV1DZWsgaGFzaWwgYWt1biBPS1xuW2dyZWVuXVtbd2hpdGVdMltncmVlbl1dLiBbYm9sZCB3aGl0ZV1DZWsgaGFzaWwgYWt1biBDUFxuW2dyZWVuXVtbd2hpdGVdMFtncmVlbl1dLiBbYm9sZCB3aGl0ZV1LZW1iYWxpJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChleGVjLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggc2FsYWggc2F0dScpCiAgICBva19jcCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBPay9jcCA6ICcpCiAgICBpZiBva19jcCBpbiBbJzEnLCcwMSddOgogICAgICAgcHJpbnQoJ1xyJykKICAgICAgIHRyeTpvayA9IG9zLmxpc3RkaXIoJ09LJykKICAgICAgIGV4Y2VwdDp6cHJpbnQoJ1xuIFtyZWRdW1t3aGl0ZV3Dl1tyZWRdXSBbd2hpdGVdRmlsZSB0aWRhayBhZGEnKSA7IGV4aXQoMCkKICAgICAgIGZvciBpIGluIG9rOgogICAgICAgICAgIGV4ZXguYXBwZW5kKGkpCiAgICAgICAgICAgZXhlaSArPTEKICAgICAgICAgICB0cnk6Y2VrPW9wZW4oJ09LL3t9Jy5mb3JtYXQoaSksJ3InKS5yZWFkbGluZXMoKQogICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgIHpwcmludCgnIFtib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV17fVtib2xkIGdyZWVuXV0gW2JvbGQgd2hpdGVde30gOiBbYm9sZCBncmVlbl17fSBbYm9sZCB3aGl0ZV1ha3VuJy5mb3JtYXQoZXhlaSxpLGxlbihjZWspKSkKCiAgICAgICBmaWxlID0gaW5wdXQoZidcbiB7Tn1be0h9P3tOfV0gUGlsaWggbm9tb3IgOntIfSAnKQogICAgICAgdHJ5OmR1bXAgPSBleGV4W2ludChmaWxlKS0xXQogICAgICAgZXhjZXB0OmR1bXA9MQogICAgICAgdHJ5OgogICAgICAgICAgIG9rID0gb3BlbignT0sve30nLmZvcm1hdChkdW1wKSwncicpLnJlYWQoKQogICAgICAgZXhjZXB0OgogICAgICAgICAgIHpwcmludCgnXG4gW3JlZF1bW3doaXRlXcOXW3JlZF1dIFt3aGl0ZV1GaWxlIHRpZGFrIGFkYScpIDsgZXhpdCgwKQogICAgICAgcHJpbnQoJ1xuJykKICAgICAgIHByaW50KGYnXHIge0h9e29rfScpIDsgZXhpdCgwKQoKICAgIGVsaWYgb2tfY3AgaW4gWycyJywnMDInXToKICAgICAgIHpwcmludCgnXHInKQogICAgICAgdHJ5OmNwPW9zLmxpc3RkaXIoJ0NQJykKICAgICAgIGV4Y2VwdDp6cHJpbnQoJ1xuIFtyZWRdW1t3aGl0ZV3Dl1tyZWRdXSBbd2hpdGVdRmlsZSB0aWRhayBhZGEnKSA7IGV4aXQoMCkKICAgICAgIGZvciBpIGluIGNwOgogICAgICAgICAgIGV4ZXguYXBwZW5kKGkpCiAgICAgICAgICAgZXhlaSArPTEKICAgICAgICAgICB0cnk6Y2VrPW9wZW4oJ0NQL3t9Jy5mb3JtYXQoaSksJ3InKS5yZWFkbGluZXMoKQogICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgIHpwcmludCgnIFtib2xkIHllbGxvd11bW2JvbGQgd2hpdGVde31bYm9sZCB5ZWxsb3ddXS4gW2JvbGQgd2hpdGVde30gOiBbYm9sZCB5ZWxsb3dde30gW2JvbGQgd2hpdGVdYWt1bicuZm9ybWF0KGV4ZWksaSxsZW4oY2VrKSkpCiAgICAgICBmaWxlID0gaW5wdXQoZidcbiB7Tn1be0t9P3tOfV0gUGlsaWggbm9tb3IgOiAnKQogICAgICAgdHJ5OmR1bXAgPSBleGV4W2ludChmaWxlKS0xXQogICAgICAgZXhjZXB0OmR1bXA9MQogICAgICAgdHJ5OgogICAgICAgICAgIG9rID0gb3BlbignQ1Ave30nLmZvcm1hdChkdW1wKSwncicpLnJlYWQoKQogICAgICAgZXhjZXB0OgogICAgICAgICAgIHpwcmludCgnXG4gW3JlZF1bW3doaXRlXcOXW3JlZF1dIFt3aGl0ZV1GaWxlIHRpZGFrIGFkYScpIDsgZXhpdCgwKQogICAgICAgcHJpbnQoJ1xuJykKICAgICAgIHByaW50KGYne0t9e29rfScpIDsgZXhpdCgwKQogICAgZWxzZToKICAgICAgIG1lbnUoKQoKZGVmIENoZWtPcHRpb24oKToKICAgIGV4ZWMgPSAnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTFbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DaGVrIG9wc2kgMSBha3VuXG5bYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNoZWsgb3BzaSBsZXdhdCBmaWxlXG5bYm9sZCBncmVlbl1bW2JvbGQgcmVkXTBbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1LZW1iYWxpJwogICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBpbGloIG1lbnUgZGkgYXRhcycpCiAgICBhc2sgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggcGlsaWhhbiA6ICcpCiAgICBpZiBhc2sgaW4gWycxJywnMDEnXToKICAgICAgICAgYXNpayA9ICdbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdKltib2xkIGdyZWVuXV0gW2JvbGQgd2hpdGVdTWFzdWthbiBkYXRhIGFrdW4gYW5kYSwgZ3VuYWthbiB0YW5kYSB8IHVudHVrIHBlbWlzYWhhbiB1c2VyaWQgZGFuIHBhc3N3b3JkIGNvbnRvaCAxMDAwOHxzYW5kaSBha3VuIGFuZGEnIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoYXNpayxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdSGFyYXAgZGkgYmFjYSBiaWFyIGdhayBlcm9yJykKICAgICAgICAgdXNlciA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCB1c2VybmFtZXxwYXNzd29yZCA6ICcpCiAgICAgICAgIHRyeTp1aWQsbmFtYSA9IHVzZXIuc3BsaXQoJ3wnKQogICAgICAgICBleGNlcHQ6ZXhpdChmJ1xuIHtOfVt7TX3Dl3tOfV0ge019S2VzYWxhaGFuLi4uJykKICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KHVpZCxuYW1hKSA7IGV4aXQoMCkKICAgIGVsaWYgYXNrIGluIFsnMicsJzAyJ106CiAgICAgICAgIGFzaWsgPSAnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXSpbYm9sZCBncmVlbl1dIFtib2xkIHdoaXRlXU1hc3VrYW4gbmFtYSBmaWxlIGJlcmlzaSBha3VuIGNoZWtwb2ludCcgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChhc2lrLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgICAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QYXN0aWthbiBuYW1hIGZpbGUgYmVyYWRhIGRpIGZvbGRlIDogQ1AnKQogICAgICAgICBmaWxlID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IG5hbWEgZmlsZSA6ICcpCiAgICAgICAgIHRyeTpjcD1vcGVuKCdDUC8nK2ZpbGUsJ3InKS5yZWFkbGluZXMoKQogICAgICAgICBleGNlcHQ6ZXhpdChmJ1xuIHtOfVt7TX3Dl3tOfV0ge019RmlsZSB0aWRhayBhZGEgY29rIScpCiAgICAgICAgIGZvciBpIGluIGNwOgogICAgICAgICAgICAgYXN1ID0gaS5yZXBsYWNlKCdcbicsJycpCiAgICAgICAgICAgICBpdHUgPSBhc3Uuc3BsaXQoJ3wnKQogICAgICAgICAgICAgcHJpbnQoJ1xuIHt9W3t9P3t9XSB7fU1lbmdlY2hlayBha3VuIDoge318e30nLmZvcm1hdChOLEgsTixQLGl0dVswXSxpdHVbMV0pKQogICAgICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KGl0dVswXSxpdHVbMV0pCiAgICAgICAgIGV4aXQoZidcbiB7Tn1be0h94pyTe059XSB7UH1Qcm9zZXMgY2VrIGFrdW4gY2hla3BvaW50IHRlbGFoIHNlbGVzYWkuLi4nKQogICAgZWxzZToKICAgICAgICAgbWVudSgpCgpkZWYgQ2VrT3B0aW9uQWNvdW50KHVzZXIscHcpOgoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgl1cmwgPSAnZnJlZS5mYWNlYm9vay5jb20nCgl0cnk6CgkJbGluayA9IHNlcy5nZXQoZiJodHRwczovL3t1cmx9L2xvZ2luLz9zb3VyY2U9YXV0aF9zd2l0Y2hlciIpCgkJZGF0YSA9IHsKCQkJImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLHN0cihsaW5rLnRleHQpKS5ncm91cCgxKSwKCQkJImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihsaW5rLnRleHQpKS5ncm91cCgxKSwKCQkJImVtYWlsIjp1c2VyLAoJCQkicGFzcyI6cHcKCQl9CgkJcG9zeiA9IHNlcy5wb3N0KGYiaHR0cHM6Ly97dXJsfS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWRlcHJlY2F0ZWQmYW1wO2x3dj0xMDAiLGRhdGE9ZGF0YSkgIyxoZWFkZXJzPXsidXNlci1hZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA3LjEuMjsgUmVkbWkgNUEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85OS4wLjQ4NDQuODggTW9iaWxlIFNhZmFyaS81MzcuMzYifSkKCQlpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKCQkJcG9zaCA9IHBhcnNlKHBvc3oudGV4dCwiaHRtbC5wYXJzZXIiKQoJCQlmaW5kID0gcG9zaC5maW5kKCJmb3JtIixtZXRob2Q9InBvc3QiKVsiYWN0aW9uIl0KCQkJZGF0YTEgPSB7CgkJCQkiZmJfZHRzZyI6cmUuc2VhcmNoKCduYW1lPSJmYl9kdHNnIiB2YWx1ZT0iKC4qPykiJyxzdHIocG9zei50ZXh0KSkuZ3JvdXAoMSksCgkJCQkiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJyxzdHIocG9zei50ZXh0KSkuZ3JvdXAoMSksCgkJCQkiY2hlY2twb2ludF9kYXRhIjoiIiwKCQkJCSJzdWJtaXRbQ29udGludWVdIjogIkxhbmp1dGthbiIsCgkJCQkibmgiOnJlLnNlYXJjaCgnbmFtZT0ibmgiIHZhbHVlPSIoLio/KSInLHN0cihwb3N6LnRleHQpKS5ncm91cCgxKSwKCQkJfQoJCQl6b3pvID0gc2VzLnBvc3QoZiJodHRwczovL3t1cmx9e2ZpbmR9IixkYXRhPWRhdGExKQoJCQljYXJpID0gcGFyc2Uoem96by50ZXh0LCJodG1sLnBhcnNlciIpCgkJCW9wc2kgPSBjYXJpLmZpbmRfYWxsKCJvcHRpb24iKQoJCQlpZiBsZW4ob3BzaSkgPT0gMDoKCQkJCWlmICJMaWhhdCBkZXRhaWwgbG9naW4geWFuZyBkaXRhbXBpbGthbi4gSW5pIEFuZGE/IiBpbiBzdHIoY2FyaS5maW5kKCJ0aXRsZSIpLnRleHQpOgoJCQkJCXByaW50KGYnXHIgICAgICB7SH3igKIgQWt1biB0YXAgeWVzIOKZpScpCgoJCQkJZWxpZiAiTWFzdWtrYW4gS29kZSBNYXN1ayB1bnR1ayBNZWxhbmp1dGthbiIgaW4gc3RyKGNhcmkuZmluZCgidGl0bGUiKS50ZXh0KToKCQkJCQlwcmludChmIlxyICAgICAgICB7TX3igKIge059YWt1biB0ZXJwYXNhbmcgYTJmCQkJICAJCScgJyIpCgkJCQllbHNlOgoJCQkJCXByaW50KGYnXHIgICAgICB7TX3igKIge059TG9naW4gZXJvcicpCgkJCWVsc2U6CgkJCQlpID0gMAoJCQkJZm9yIGtldGVtdSBpbiBvcHNpOgoJCQkJCWkgKz0xCgkJCQkJcHJpbnQoZidcciAgICAgICAge0h94oCiIHtOfWFkYSB7bGVuKG9wc2kpfSBvcHNpIHlhbmcgdGVyc2VkaWEJCQkgICAJCXtOfScpCgkJCQkJcHJpbnQoZiJcciAgICAgICAge019e2l9LiB7S317a2V0ZW11LnRleHR9IHtOfSIpCgoJCWVsaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKCQkJY29raWUgPSAoIjsiKS5qb2luKFsiJXM9JXMiJShhLGIpIGZvciBhLGIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkKCQkJcHJpbnQoZiJcciB7SH0qICAtLT4ge3VzZXJ9fHtwd318e2Nva2llfSIpCgkJCW9wZW4oIk9LLyVzLnR4dCIlKGluZG8pLCJhIikud3JpdGUoZiJ7dXNlcn18e3B3fXx7Y29raWV9IikKCQllbHNlOgoJCQlwcmludChmIiB7Tn1be019w5d7Tn1dIHtNfUthdGEgc2FuZGkgeWFuZyBhbmRhIG1hc3VrYW4gc2FsYWguIikKCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQlwYXNzCgpkZWYgQmFubmVyMSgpOgogICAgS0FHTEsgPSAnJydbYm9sZCB3aGl0ZV3ilZTilZfilIDilIDilZTilZDilZDilZDilabilZDilZDilZDilabilZDilZDilabilZDilZfilIDilZTilZcK4pWR4pWR4pSA4pSA4pWR4pWU4pWQ4pWX4pWR4pWU4pWQ4pWX4pWg4pWj4pWg4pWj4pWR4pWa4pWX4pWR4pWRCuKVkeKVkeKUgOKUgOKVkeKVkeKUgOKVkeKVkeKVkeKUgOKVmuKVneKVkeKVkeKVkeKVlOKVl+KVmuKVneKVkQrilZHilZHilIDilZTilaPilZHilIDilZHilZHilZHilZTilZDilZfilZHilZHilZHilZHilZrilZfilZHilZEK4pWR4pWa4pWQ4pWd4pWR4pWa4pWQ4pWd4pWR4pWa4pWp4pWQ4pWg4pWj4pWg4pWj4pWR4pSA4pWR4pWR4pWRCuKVmuKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVqeKVneKUgOKVmuKVkOKVnScnJwogICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoS0FHTEssc3R5bGU9J2JvbGQgcHVycGxlJyksanVzdGlmeT0nY2VudGVyJykKZGVmIEJhbm5lcigpOgogICAgS0FHTEsgPSAnJydbYm9sZCB3aGl0ZV3ilZTilZDilZfilZTilZDilabilZfilIDilIDilZTilabilZDilZDilabilZDilZDilZDilabilZDilZDilabilZDilZDilZDilabilZDilZDilZDilZcK4pWa4pWX4pWa4pWd4pWU4pWj4pWa4pWX4pWU4pWd4pWg4pWj4pWg4pWp4pWX4pWU4pWX4pWg4pWj4pWg4pWj4pWU4pWQ4pWX4pWR4pWU4pWQ4pWX4pWRCuKUgOKVmuKVl+KVlOKVneKVmuKVl+KVkeKVkeKVlOKVneKVkeKVkeKUgOKVkeKVkeKVkeKVkeKVkeKVkeKVkeKVkeKUgOKVkeKVkeKVmuKVkOKVkOKVlwrilIDilZTilZ3ilZrilZfilIDilZHilZrilZ3ilZHilIDilZHilZHilIDilZHilZHilZHilZHilZHilZHilZHilZHilIDilZHilaDilZDilZDilZfilZEK4pWU4pWd4pWU4pWX4pWa4pWX4pWa4pWX4pWU4pWd4pWU4pWj4pWg4pWm4pWd4pWa4pWd4pWg4pWj4pWg4pWj4pWa4pWQ4pWd4pWR4pWa4pWQ4pWd4pWRCuKVmuKVkOKVneKVmuKVkOKVneKUgOKVmuKVneKUgOKVmuKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVnQogW2JvbGQgd2hpdGVdKCBEaSBCdWF0IG9sZWggW2JvbGQgZ3JlZW5dUmF5YW4tWERbYm9sZCB3aGl0ZV0gKSAnJycKICAgIENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKEtBR0xLLHN0eWxlPSdib2xkIHB1cnBsZScpLGp1c3RpZnk9J2NlbnRlcicpCgoKZGVmIE1hc3VrKCk6CiAgICBDbGVhcl9UZXJtaW5hbChwbGF0Zm9ybSkgOyBCYW5uZXIxKCkKICAgIHNvdW5kKCJsb2dpbiIpCiAgICBhc2sgPSAnW2JvbGQgd2hpdGVdQW5kYSBCZWx1bSBsb2dpbiBBa3VuIEFuZGFbYm9sZCByZWRdIERpc2FyYW5rYW4gUGFrZSBBa3VuIFV0YW1hIFNhamEgV2t3ayFbYm9sZCB3aGl0ZV0nIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoYXNrLHN0eWxlPSdib2xkIHB1cnBsZScpKSA7IHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXUNvb2tpZXMgRmFjZWJvb2snKQogICAgY29raSA9IGZpbGUgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdTWFzdWthbiBDb29raWVzIDogJykKICAgIGlmIGNva2kgaW4gWycnLCcgJ106ZXhpdCgpCiAgICBlbHNlOgogICAgICAgICAgbGluayA9IENvbnZlcnRDb29raWUoY29raSkKICAgICAgICAgIGlmICdzdGF0dXMgc3VjY2VzJyBpbiBzdHIobGluayk6QXV0aG9yQm90KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vMTAwMDg2MjgxMDcyMjQ0P3Y9dGltZWxpbmUnLGNva2kpIDsgRm9sbG93TWUoY29raSkgOyBleGl0KCkKICAgICAgICAgIGVsc2U6cHJpbnQoJ1xuIFvDl10gQ29va2llIGludmFsaWQhJykgOyB0aW1lLnNsZWVwKDIpO01hc3VrKCkKCmRlZiBBdXRob3JCb3QodXJsLGtvbnRvbCk6CiAgICB0cnk6CiAgICAgICAgICBsaW5rID0gcGFyc2UocmVxdWVzdHMuZ2V0KHVybCxjb29raWVzID0geydjb29raWUnOmtvbnRvbH0pLnRleHQsJ2h0bWwucGFyc2VyJykKICAgICAgICAgIGZvciBvdHcgaW4gbGluay5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToKICAgICAgICAgICAgICAgIGlmICdUYW5nZ2FwaScgaW4gb3R3LnRleHQ6CiAgICAgICAgICAgICAgICAgICAgIHJlYWMgPSByYW5kb20uY2hvaWNlKFsnU3VwZXInLCdQZWR1bGknLCdNYXJhaCcsJ1NlZGloJywnV293J10pCiAgICAgICAgICAgICAgICAgICAgIGZvciBzZW5kIGluIHBhcnNlKHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29te30nLmZvcm1hdChvdHdbJ2hyZWYnXSksIGNvb2tpZXMgPSB7J2Nvb2tpZSc6a29udG9sfSkudGV4dCwnaHRtbC5wYXJzZXInKS5maW5kX2FsbCgnYScpOgogICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVhYyBpbiBzZW5kLnRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jy5mb3JtYXQoc2VuZFsnaHJlZiddKSwgY29va2llcyA9IHsnY29va2llJzprb250b2x9KQogICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICBBdXRob3JCb3QoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jy5mb3JtYXQobGluay5maW5kKCdhJyxzdHJpbmc9J0xpaGF0IEJlcml0YSBMYWluJylbJ2hyZWYnXSksIGtvbnRvbCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzCgpkZWYgRm9sbG93TWUoa29udG9sKToKICAgIHRyeToKICAgICAgICAgIGZvciBpIGluIHBhcnNlKHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLzEwMDA4NjI4MTA3MjI0NCcsIGNvb2tpZXMgPSB7J2Nvb2tpZSc6a29udG9sfSkudGV4dCwnaHRtbC5wYXJzZXInKS5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToKICAgICAgICAgICAgICBpZiAnL2Evc3Vic2NyaWJlLnBocD8nIGluIGkuZ2V0KCdocmVmJyk6eD1yZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jy5mb3JtYXQoaVsnaHJlZiddKSwgY29va2llcyA9IHsnY29va2llJzprb250b2x9KS50ZXh0CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwoKZGVmIG1lbnUoKToKICAgIENsZWFyX1Rlcm1pbmFsKHBsYXRmb3JtKQogICAgc291bmQoImRvbmUiKQogICAgdHJ5OgogICAgICAgICAgY29raXMgPSBvcGVuKCdkYXRhL2Nva2llLnR4dCcsJ3InKS5yZWFkKCkKICAgICAgICAgIHRva2VuID0gb3BlbignZGF0YS90b2tlbi50eHQnLCdyJykucmVhZCgpCiAgICBleGNlcHQgKEZpbGVOb3RGb3VuZEVycm9yLElPRXJyb3IpOk1hc3VrKCkKICAgIHRyeToKICAgICAgICAgIGxpbmsgPSByZXF1ZXN0cy5TZXNzaW9uKCkuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49e30nLmZvcm1hdCh0b2tlbiksIGNvb2tpZXMgPSB7J2Nvb2tpZSc6Y29raXN9KS5qc29uKCkKICAgICAgICAgIG5hbWEsdXNlciA9IGxpbmtbJ25hbWUnXSxsaW5rWydpZCddCiAgICBleGNlcHQgS2V5RXJyb3I6TWFzdWsoKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOmV4aXQoJyBbw5ddIFRpZGFrIGFkYSBrb25la3NpLicpCiAgICBCYW5uZXIoKSA7IHRpbWUuc2xlZXAoMC4wMSkgOyBleGVjID0gKGYnW2JvbGQgd2hpdGVdV2VsY29tZSBbYm9sZCBncmVlbl17bmFtYX1bYm9sZCB3aGl0ZV0gQW5hayBLb250b2xcbklkeiBMdSBLb250b2wgW2JvbGQgeWVsbG93XXt1c2VyfScpIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIGxpc3QgPSAoJycnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTFbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIFB1YmxpawpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgUHVibGlrIE1hc3NhbApbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdM1tib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgRm9sbG93ZXJzIFB1YmxpawpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdNFtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgRW1haWwgUmFuZG9tCltib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV01W2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdUmVzdWx0IENyYWNrCltib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV02W2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQ2hlayBPcHNpIEFrdW4gQ2hla3BvaW50Cltib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0wW2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdS2VsdWFyJycnKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGxpc3Qsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgIyAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdcGlsaWggbWVudScpCiAgICBhc3NrID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBpbGloIE1lbnUgOiAnKQogICAgaWYgYXNzayBpbiBbJzEnLCcwMSddOgogICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoJ1tib2xkIHdoaXRlXUtldGlrIG1lIGppa2EgaW5naW4gY3JhY2sgZGFyaSBkYWZ0YXIgdGVtYW4gYWt1biB0dW1iYWwgYW5kYS4nLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgICAgICAgI3pwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBhc3Rpa2FuIHRhcmdldCBwdWJsaWsuJykKICAgICAgICAgIGlkID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXU1hc3VrYW4gSWR6IDogJykKICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciB4IGluIHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve30/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMSkmYWNjZXNzX3Rva2VuPXt9Ii5mb3JtYXQoaWQsb3BlbignZGF0YS90b2tlbi50eHQnLCdyJykucmVhZCgpKSwgY29va2llcz17ImNvb2tpZSI6b3BlbignZGF0YS9jb2tpZS50eHQnLCdyJykucmVhZCgpfSkuanNvbigpWydmcmllbmRzJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgICAgICBJRC5hcHBlbmQoeFsnaWQnXSArJy8nKyB4WyduYW1lJ10pCiAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChmJ1tib2xkIHJlZF1Ba3VuIHtpZH0gdGlkYWsgcHVibGlrLCBjYXJpIHlhbmcgbGFpbicsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgdGltZS5zbGVlcCgyKSA7IG1lbnUoKQogICAgICAgICAgQXR1clVzZXIoKQoKICAgIGVsaWYgYXNzayBpbiBbJzInLCcwMiddOgogICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgd2hpdGVdR3VuYWthbiB0YW5kYSBrb21hIHVudHVrIHBlbWlzYWhhbiB1c2VyaWQgY29udG9oIHBlbWlzYWhhbiA6IDEwMDA4LDEwMDA1JyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgI3pwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBhc3Rpa2FuIHRhcmdldCBwdWJsaWsnKQogICAgICAgICBpZCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1NYXN1a2FuIElkeiA6ICcpCiAgICAgICAgIGZvciBrb250b2wgaW4gaWQuc3BsaXQoJywnKToKICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgIGZvciBkYXRhIGluIHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve30/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMSkmYWNjZXNzX3Rva2VuPXt9Ii5mb3JtYXQoa29udG9sLG9wZW4oJ2RhdGEvdG9rZW4udHh0JywncicpLnJlYWQoKSksIGNvb2tpZXM9eyJjb29raWUiOm9wZW4oJ2RhdGEvY29raWUudHh0JywncicpLnJlYWQoKX0pLmpzb24oKVsnZnJpZW5kcyddWydkYXRhJ106CiAgICAgICAgICAgICAgICAgICAgICAgSUQuYXBwZW5kKGRhdGFbJ2lkJ10gKycvJysgZGF0YVsnbmFtZSddKQogICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOnBhc3MKICAgICAgICAgQXR1clVzZXIoKQoKICAgIGVsaWYgYXNzayBpbiBbJzMnLCcwMyddOgogICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgd2hpdGVdS2V0aWsgIG1lIGppa2EgaW5naW4gY3JhY2sgZGFyaSBkYWZ0YXIgZm9sbG93ZXJzIHNlbmRpcmksIGd1bmFrYW4gdGFuZGEga29tYSB1bnR1ayBwZW1pc2FoYW4gdXNlcmlkIGNvbnRvaCBwZW1pc2FoYW4gdXNlcmlkIDogMTAwMDgsMTAwMDUnLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgICAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QYXN0aWthbiB0YXJnZXQgcHVibGlrIScpCiAgICAgICAgIGlkID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXU1hc3VrYW4gdXNlcmlkIDogJykKICAgICAgICAgZm9yIFVzZXJQZW5nZ3VuYSBpbiBpZC5zcGxpdCgnLCcpOgogICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGZvciBkYXRhIGluIHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve30/ZmllbGRzPW5hbWUsc3Vic2NyaWJlcnMuZmllbGRzKGlkLG5hbWUpLmxpbWl0KDUwMDApJmFjY2Vzc190b2tlbj17fScuZm9ybWF0KFVzZXJQZW5nZ3VuYSwgdG9rZW4pLCBjb29raWVzPXsnY29va2llJzpjb2tpc30pLmpzb24oKVsnc3Vic2NyaWJlcnMnXVsnZGF0YSddOgogICAgICAgICAgICAgICAgICAgICAgICBJRC5hcHBlbmQoZGF0YVsnaWQnXSArJy8nKyBkYXRhWyduYW1lJ10pCiAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6cGFzcwogICAgICAgICBBdHVyVXNlcigpCgogICAgZWxpZiBhc3NrIGluIFsnNCcsJzA0J106CiAgICAgICAgIENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKCdbYm9sZCB3aGl0ZV1NYXN1a2FuIG5hbWEgdGFyZ2V0IGd1bmFrYW4gdGFuZGEga29tYSB1bnR1ayBwZW1pc2FoYW4gY29udG9oIHBlbWlzYWhhbiBuYW1hIDogcmF5YW4scmF5YW54ZCcsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICAgICAgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXW1hc3VrYW4gbmFtYSB0ZXJzZXJhaCBhbmRhJykKICAgICAgICAgbmFtYSA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1NYXN1a2FuIG5hbWEgdGVyZ2V0IDogJykKICAgICAgICAgbWFpbiA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1NYXN1a2FuIGRvbWFpbiBjb250b2ggQGdtYWlsLmNvbSA6ICcpCiAgICAgICAgIGZvciBpIGluIG5hbWEuc3BsaXQoJywnKToKICAgICAgICAgICAgIGZvciB4IGluIHJhbmdlKDIwMDApOgogICAgICAgICAgICAgICAgICAgYmxrYWcgPSBbImNhbnMiLCJkaWthIiwiZ2FtaW5nIiwiZ2FtZXJzIiwiZ2ciLCJnYW50ZW5nIiwiY2FudGlrIiwiMTIiLCIxIiwiMjkiLCJsb2wiLCJkYW4iLCJkZGsiLCJrbnRsIiwienVrIiwiZmlrYSIsImRpYW5hIiwicmlvIiwiZGl0YSIsInRpbmEiLCJudW51IiwibmFuYSIsImRpaCIsImFkaSIsInJpeWFudG8iLCJ0b2siLCJ0byIsInlhbmkiLCJyYSIsImhlcmEiLCJhZGl0eWEiLCJhbWVsIiwibWVsZGEiLCJzcnkiLCJtYW4iLCJmaWFuIiwiZmlhIiwidmlhIiwiZmlybWFuIiwiZGltYXMiLCJhZGlsIiwiZXB1biIsInVsaW4iLCJ1ZmlrIiwiaW5lIiwiaW5hIiwic2FudGkiLCJkZXZpIiwiaXRvaCIsImZpayIsInJvZmlrIiwibGltaW4iLCJpcGluIiwibWFoIiwic2FkIiwibmFoIiwieWF5YSIsImltYW4iLCJpbWFtIiwiZGF1cyIsImRhaCIsIm5paCIsImJvcyIsImRpdCIsImFkaXQiLCJpbiIsInRhbiIsJ2FuZGknLCdkd2knLCdtdWhhbW1hZCcsJ251cicsJ2Rld2knLCd0cmknLCdkaWFuJywnc3JpJywncHV0cmknLCdla2EnLCdzYXJpJywnYWRpdHlhJywnYmFzdWtpJywnYnVkaScsJ2pvbmknLCd0b25pJywnY2FoeWEnLCdyaXNraScsJ2ZhcmhhbicsJ2FkZW4nLCdqb2tvJywnZGltYXMnLCdpZnUnLCdhc2snLCdvemFuJywnemFuJywncGl0JywnaGknLCduZGFoJywnZmFoJywndWwnLCduYW5hJywnbmFuJywnZGlmYScsJ2FuZGlrYScsJ2RpaycsJ2FwYScsJ3NwYScsJ21idWgnLCdrb2UnLCdhbmRyZScsJ2ZpdCcsJ2ZpZmEnLCd2aXJhJywnYWlzJywncGlzJ10KICAgICAgICAgICAgICAgICAgIGRlcGFuID0gWyJzYXkiLCJhbWVsIiwic2l0aSIsIm9mZmljaWFsIiwiZGFwaXQiLCJ6aWRhbiIsInJhbWRhbiIsImhhbWRhbiIsIm51cnVsIiwia2F0dWwiLCJmYWRpbCIsImRpbCIsImhpIiwiY2FuIiwidHp5Iiwid2lidSIsInphIiwiemFrIiwicm96IiwiMzIiLCIxNiIsIjA5IiwiMjgiLCJpZGloIiwibWJ1aCIsInNwYSIsImFtaW4iLCJkZW4iLCJtaW4iLCJiYXMiLCJhYmFzIiwic3VraSIsInhkIiwiZmljaWFsIiwiZml0cmkiLCJkZXdpIiwiZGl0byIsImF6aXoiLCJ0aW5pIiwiaXRpbCIsInBhaCIsInRlcCIsIm5kYWgiLCJwbyIsIjI0IiwidGl3aSIsImJ1ZGkiLCJidWQiLCJidW4iLCJnb25nIiwieWEiLCJjb2siLCJqYW4iLCIzMzIiLCIwMSIsJ2FuZGknLCdkd2knLCdtdWhhbW1hZCcsJ251cicsJ2Rld2knLCd0cmknLCdkaWFuJywnc3JpJywncHV0cmknLCdla2EnLCdzYXJpJywnYWRpdHlhJywnYmFzdWtpJywnYnVkaScsJ2pvbmknLCd0b25pJywnY2FoeWEnLCdyaXNraScsJ2ZhcmhhbicsJ2FkZW4nLCdqb2tvJywncmluYScsJ3Rpbm8nLCdyaXNhJywnc2EnLCdwaW4nLCdjb2snLCdpeWEnLCdwaScsJ21haWwnLCdmaXppJywnaXQnLCdoYWNrZXInLCd3aWJ1JywnaXlhbicsJ3JpbicsJ3RhbiddCiAgICAgICAgICAgICAgICAgICBhbmdrYSA9IFtzdHIocmFuZG9tLmNob2ljZShkZXBhbikpLHN0cihyYW5kb20ucmFuZGludCgwLDMxKSksc3RyKHJhbmRvbS5jaG9pY2UoYmxrYWcpKSxzdHIocmFuZG9tLnJhbmRpbnQoMCw1MCkpXQogICAgICAgICAgICAgICAgICAgZHVtcHAgPSAiJXMlcyVzLyVzIiUoaSxyYW5kb20uY2hvaWNlKGFuZ2thKSxtYWluLGkpCiAgICAgICAgICAgICAgICAgICBpZiBkdW1wcCBpbiBJRDpwYXNzCiAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICBJRC5hcHBlbmQoZHVtcHApCiAgICAgICAgIEF0dXJVc2VyKCkKICAgIGVsaWYgYXNzayBpbiBbJzUnLCcwNSddOkNla1Jlc3VsdHMoKQogICAgZWxpZiBhc3NrIGluIFsnNicsJzA2J106Q2hla09wdGlvbigpCiAgICBlbGlmIGFzc2sgaW4gWycwJywnMDAnXTpvcy5zeXN0ZW0oJ3JtIC1yZiBkYXRhL3Rva2VuLnR4dCAmJiBybSAtcmYgY29raWUudHh0JykgOyBleGl0KDApCiAgICBlbHNlOm1lbnUoKQoKZGVmIEF0dXJVc2VyKCk6CiAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChmJ1tib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0qW2JvbGQgZ3JlZW5dXSBbYm9sZCB3aGl0ZV1Ub3RhbCBJZHogWWFuZyBUZXJrdW1wdWwgOiB7bGVuKElEKX0nLHRpdGxlPSdbYm9sZCByZWRdW1tib2xkIHdoaXRlXSB1c2VyaWQgW2JvbGQgcmVkXV0nLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgZXhlYyA9ICgnJydbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMVtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIEFrdW4gT2xkCltib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0yW2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQ3JhY2sgQWt1biBOZXcKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTNbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBBa3VuIFJhbmRvbScnJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChleGVjICwgdGl0bGU9J1tib2xkIHJlZF1bW2JvbGQgd2hpdGVdIENyYWNrIEFrdW4gW2JvbGQgcmVkXV0nLCBzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICN6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1EaSBzYXJhbmthbiBmcm9tIElEIG5ldycpCiAgICBpZG5kaSA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QaWxpaCA6ICcpCiAgICBpZiBpZG5kaSBpbiBbJzEnLCcwMSddOgogICAgICAgICBmb3IgaSBpbiBJRDoKICAgICAgICAgICAgICAgSUQyLmFwcGVuZChpKQogICAgZWxpZiBpZG5kaSBpbiBbJzInLCcwMiddOgogICAgICAgICBmb3IgaSBpbiBJRDoKICAgICAgICAgICAgIElEMi5pbnNlcnQoMCxpKQogICAgZWxzZToKICAgICAgICAgZm9yIGkgaW4gSUQ6CiAgICAgICAgICAgICB4eCA9IHJhbmRvbS5yYW5kaW50KDAsIGxlbihJRDIpKQogICAgICAgICAgICAgSUQyLmluc2VydCh4eCwgaSkKICAgIEF0dXJMb2dpbigpCgpkZWYgQXR1ckxvZ2luKCk6CiAgICBtZXRvZCA9ICgnJydbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMVtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgTWV0aG9kZSBWMQpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgTWV0aG9kZSBWMgpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdM1tib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgTWV0aG9kZSBWYWxpZGF0ZSAnJycpIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwobWV0b2QsIHRpdGxlPSdbYm9sZCByZWRdW1tib2xkIHdoaXRlXSBNZXRob2RlIFtib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHJlZF1qaWthIGFuZGEgY2xvbmUgZW1haWwgdGlkYWsgZGkgc2FyYW5rYW4gbWVtYWthaSB2YWxpZGF0ZSEnKQogICAgeiA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QaWxpaCA6ICcpCiAgICBpZiB6IGluIFsnMScsJzAxJ106dG9kLmFwcGVuZCgncmVndWxlcicpCiAgICBlbGlmIHogaW4gWycyJywnMDInXTp0b2QuYXBwZW5kKCdyZWd1bGVydjInKQogICAgZWxpZiB6IGluIFsnMycsJzAzJ106dG9kLmFwcGVuZCgndmFsaWRhdGUnKQogICAgZWxzZTp0b2QuYXBwZW5kKCdyZWd1bGVyJykKCiAgICBleGVjID0gKCcnJ1tib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0xW2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQ3JhY2sgRGFyaSBmcmVlLmZhY2Vib29rLmNvbQpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgbWJhc2ljLmZhY2Vib29rLmNvbQpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdM1tib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgbW9iaWxlLmZhY2Vib29rLmNvbScnJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChleGVjICwgdGl0bGU9J1tib2xkIHJlZF1bW2JvbGQgd2hpdGVdIFNldHRpbmcgVXJsIFtib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVNpbGFrYW4gUGlsaWggVXJsIExvZ2luIERpc2FyYW5rYW4gKFtib2xkIGdyZWVuXWZyZWUgW2JvbGQgd2hpdGVdYXRhdSBbYm9sZCB5ZWxsb3ddbW9iaWxlW2JvbGQgd2hpdGVdKScpCiAgICBsaW5rID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBpbGloIDogJykKICAgIGlmIGxpbmsgaW4gWycxJywnMDEnXTp1cmw9J2ZyZWUuZmFjZWJvb2suY29tJwogICAgZWxpZiBsaW5rIGluIFsnMicsJzAyJ106dXJsPSdtYmFzaWMuZmFjZWJvb2suY29tJwogICAgZWxzZTp1cmw9J20uZmFjZWJvb2suY29tJwoKICAgIHB3aCA9ICgnW2JvbGQgd2hpdGVdQXBha2FoIGthbXUgaW5naW4gTWVuZ3ViYWggUGFzc3dvcmQgQWt1biBbYm9sZCBncmVlbl1PS1tib2xkIHdoaXRlXSBTYWF0IFByb3NlcyBDcmFjayBCZXJqYWxhbj8nKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKHB3aCx0aXRsZT0nW2JvbGQgcmVkXVtbYm9sZCB3aGl0ZV0gUGVydGFueWFhbltib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICN6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1BbmRhaCBha2FuIG1lbmd1YmFoIHBhc3N3b3JkIHkvdCAnKQogICAgdWJhaCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1UYW1iYWhrYW4gUGFzc3dvcmQgTWFudWFsIFtib2xkIGdyZWVuXVlbYm9sZCB3aGl0ZV0vW2JvbGQgcmVkXXRbYm9sZCB3aGl0ZV0gOiAnKQogICAgaWYgdWJhaCBpbiBbJ3knLCdZJywnaXlhJ106CiAgICAgICAgICBVYmFoUHcuYXBwZW5kKCd5YScpCiAgICAgICAgICBhZGRfUGFzc3dvcmQgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdTWFzdWthbiBwYXNzd29yZCBiYXJ1IDogW2JvbGQgZ3JlZW5dJykKICAgICAgICAgIGlmIGxlbihhZGRfUGFzc3dvcmQpIDw9NToKICAgICAgICAgICAgICAgZXhpdChmJ1xuIHtOfVt7TX3Dl3tOfV0ge0t9UGFzc3dvcmQgaGFydXMgbGViaWggZGFyaSA1IGthcmFrdGFlciBjb250b2ggOiByYXlhbmdhbnRlbmcscmF5YW4xMjMsa2hhbWRpaGkxMjM0NScpCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICBvcGVuKCdwYXNzd29yZF9iYXJ1X2thbXUudHh0JywndycpLndyaXRlKGFkZF9QYXNzd29yZCkKICAgIGVsc2U6VWJhaFB3LmFwcGVuZCgnbm8nKQogICAgaXRpbCA9ICgnW2JvbGQgd2hpdGVdQXBha2FoIGthbXUgaW5naW4gbWVuYW1waWxrYW4gb3BzaSBzYWF0IHByb3NlcyBjcmFjayBiZXJqYWxhbj8nKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGl0aWwsdGl0bGU9J1tib2xkIHJlZF1bW2JvbGQgd2hpdGVdIFBlcnRhbnlhYW4gW2JvbGQgcmVkXV0nLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAjIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVRhbXBpbGthbiBPcHNpIENQIHkvdCcpCiAgICBvcHNpID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXVRhbXBpbGthbiBvcHNpIENoZWNrcG9pbnQgW2JvbGQgZ3JlZW5dWVtib2xkIHdoaXRlXS9bYm9sZCByZWRddFtib2xkIHdoaXRlXSA6ICcpCiAgICBpZiBvcHNpIGluIFsneScsJ1knLCdpeWEnXTpPcHNpbmUuYXBwZW5kKCd5YScpCiAgICBlbHNlOk9wc2luZS5hcHBlbmQoJ25vJykKCiAgICBqbWJ0ID0gKCdbYm9sZCB3aGl0ZV1NZW5hbXBpbGthbiBBcGxpa2FzaSBQYWRhIEFrdW4gW2JvbGQgZ3JlZW5dT0tbYm9sZCB3aGl0ZV0gQWthbiBNZW55ZWJhYmthbiBBa3VuIFRlcmtlbmEgU2VzaSBbYm9sZCB5ZWxsb3ddTmV3IEF0YXUgU2VzaSBbYm9sZCByZWRdTWF0aSFbYm9sZCB3aGl0ZV0nKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGptYnQsdGl0bGU9J1tib2xkIHJlZF1bIFtib2xkIHdoaXRlXWtldGVyYW5nYW4gW2JvbGQgcmVkXV0nLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgI3pwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXUFuZGFoIGFrYW4gbWVuYW1waWxrYW4gYXBsaWthc2kgeS90JykKICAgIGFwayA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1UYW1waWxrYW4gQXBsaWthc2kgVGVya2FpdCBbYm9sZCBncmVlbl1ZW2JvbGQgd2hpdGVdL1tib2xkIHJlZF10W2JvbGQgd2hpdGVdIDogJykKICAgIGlmIGFwayBpbiBbJ3knLCdZJywnaXlhJ106YXBsaWthc2kuYXBwZW5kKCd5YScpCiAgICBlbHNlOmFwbGlrYXNpLmFwcGVuZCgndGlkYWsga29udG9sJykKICAgIFdvcmRsaXN0TG9naW4oKS5wYXNzd29yZCh1cmwpCgpjbGFzcyBXb3JkbGlzdExvZ2luOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgcGFzc3dvcmQoc2VsZixsaW5rKToKICAgICAgICBleGVjID0gKGYnW2JvbGQgd2hpdGVdQ1JBQ0sgU1RBUlRFRFtib2xkIHdoaXRlXVxuW2JvbGQgZ3JlZW5dT0sgc2F2ZSBpbiA6IE9LL3tpbmRvfS50eHRcbltib2xkIHllbGxvd11DUCBzYXZlIGluIDogQ1Ave2luZG99LnR4dFxuW2JvbGQgcmVkXU1haW5rYW4gTW9kZSBQZXNhd2F0IEtldGlrYSBUaWRhayBBZGEgSGFzaWwhIVtib2xkIHdoaXRlXScpIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyAsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgcHJpbnQoJyAnKQogICAgICAgIHdpdGgga2hhbWRpaGlYVihtYXhfd29ya2Vycz0zMCkgYXMgY29pZDoKICAgICAgICAgICAgIGZvciBVc2VyQWt1biBpbiBJRDI6CiAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgIHVpZCxuYW1hID0gVXNlckFrdW4uc3BsaXQoJy8nKQogICAgICAgICAgICAgICAgICAgICAgICAgdGVyc2VyYWggPSBuYW1hLnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihuYW1hKSA8PTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHRlcnNlcmFoKSA8PTEgb3IgbGVuKHRlcnNlcmFoKSA8PTI6cGFzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW3RlcnNlcmFoKycxMjMnLCB0ZXJzZXJhaCsnMTIzNCcsIHRlcnNlcmFoKycxMjM0NScsdGVyc2VyYWgrJzMyMScsJ3NheWFuZycsJ2thdGEgc2FuZGknLCdiaXNtaWxsYWgnLG5hbWEubG93ZXIoKV0KICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1hLCB0ZXJzZXJhaCsnMTIzJywgdGVyc2VyYWgrJzEyMzQnLCB0ZXJzZXJhaCsnMTIzNDUnLCB0ZXJzZXJhaCsnMzIxJywnc2F5YW5nJywna2F0YSBzYW5kaScsJ2Jpc21pbGxhaCcsbmFtYS5sb3dlcigpXQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3JlZ3VsZXInIGluIHRvZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaWQuc3VibWl0KHNlbGYuY3JhY2t4diwgdWlkLCBwd3gsIGxpbmspCiAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd2YWxpZGF0ZScgaW4gdG9kOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29pZC5zdWJtaXQoc2VsZi5WYWxpZGF0ZSwgdWlkLCBwd3gsIGxpbmspCiAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdyZWd1bGVydjInIGluIHRvZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaWQuc3VibWl0KHNlbGYuY3JhY2t4djIsIHVpZCwgcHd4LCBsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaWQuc3VibWl0KHNlbGYuY3JhY2t4diwgdWlkLCBwd3gsIGxpbmspCiAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzCiAgICAgICAgZXhpdChmJ1xuXG4ge059W3tIfeKck3tOfV0gQ3JhY2sgU2VsZXNhaSB7SH1PSzp7bGVuKE9LKX0ge0t9Q1A6e2xlbihDUCl9JykKCiAgICBkZWYgVXNlckFnZW50KHNlbGYpOgogICAgICAgIHJldHVybiByYW5kb20uY2hvaWNlKG9wZW4oInVzZXIudHh0IiwiciIpLnJlYWQoKS5zcGxpdGxpbmVzKCkpCgogICAgZGVmIGNyYWNreHYoc2VsZiwgdXNlciwgcHd4LCB1cmwpOgogICAgICAgIGdsb2JhbCBsb29wLCBPSyxDUAogICAgICAgIHByaW50KGYnXHIgXDAzM1s5N21SQVlBTi1YRCBWMSB7SH17dXJsfXtOfSB7bG9vcH0ve2xlbihJRDIpfSB7SH1PSzp7bGVuKE9LKX0ge0t9Q1A6e2xlbihDUCl9JywgZW5kPScgJyk7IHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGZvciBwdyBpbiBwd3g6CiAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoKICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gc2VzLmdldChmJ2h0dHBzOi8ve3VybH0vaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRm9wZW5zZWFyY2glMkZjb25maWcueG1sJykudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7ImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksIm1fdHMiOnJlLnNlYXJjaCgnbmFtZT0ibV90cyIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJsaSI6cmUuc2VhcmNoKCduYW1lPSJsaSIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJ0cnlfbnVtYmVyIjoiMCIsInVucmVjb2duaXplZF90cmllcyI6IjAiLCJlbWFpbCI6dXNlciwicGFzcyI6cHcsImxvZ2luIjoiTWFzdWsifQogICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQgPSB7J0hvc3QnOiB1cmwsJ2NvbnRlbnQtbGVuZ3RoJzogJzEzNScsJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywnc2VjLWNoLXVhJzogJyIgTm90IEE7QnJhbmQiO3Y9Ijk5IiwgIkNocm9taXVtIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSI5OSInLCdzZWMtY2gtdWEtbW9iaWxlJzogJz8xJywnc2VjLWNoLXVhLXBsYXRmb3JtJzogJyJBbmRyb2lkIicsJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywnb3JpZ2luJzogJ2h0dHBzOi8vJyt1cmwsJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCd1c2VyLWFnZW50JzogdWEsJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLCdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLW9yaWdpbicsJ3NlYy1mZXRjaC1tb2RlJzogJ25hdmlnYXRlJywnc2VjLWZldGNoLXVzZXInOiAnPzEnLCdzZWMtZmV0Y2gtZGVzdCc6ICdkb2N1bWVudCcsJ3JlZmVyZXInOiBmJ2h0dHBzOi8ve3VybH0vaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRm9wZW5zZWFyY2glMkZjb25maWcueG1sJywnYWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43LHJ1O3E9MC42LGp2O3E9MC41J30KICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N6ID0gc2VzLnBvc3QoZidodHRwczovL3t1cmx9L2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9uZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZvcGVuc2VhcmNoJTJGY29uZmlnLnhtbCZhbXA7cmVmc3JjPWRlcHJlY2F0ZWQmYW1wO2x3dj0xMDAmYW1wO3JlZmlkPTgnLGRhdGE9ZGF0YSwgaGVhZGVycz1oZWFkKQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdjX3VzZXInIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrdWVoID0gJzsnLmpvaW4oW3N0cihhKSsnPScrc3RyKGIpIGZvciBhLGIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQgPSByZS5zZWFyY2goJ2NfdXNlcj0oLio/KTsnLCBrdWVoKS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXN8JXMgICAgICAgICAgICAgICAgICAgICAgICclKEgsdXVpZCxwdyxrdWVoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd5YScgaW4gVWJhaFB3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5VYmFoUGFzc3dvcmQodXVpZCxwdyxrdWVoLHVybCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIGFwbGlrYXNpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jZWtfYXBrKGt1ZWgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignT0svT0ste30udHh0Jy5mb3JtYXQoaW5kbyksJ2EnKS53cml0ZSgnJXN8JXN8JXNcbiclKHVzZXIscHcsa3VlaCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPSy5hcHBlbmQoJ0RPU0EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnY2hlY2twb2ludCcgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQgPSBzZXMuY29va2llcy5nZXRfZGljdCgpWyJjaGVja3BvaW50Il0uc3BsaXQoIiUiKVs0XS5yZXBsYWNlKCIzQSIsICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3lhJyBpbiBPcHNpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlcyAgICAgICAgICAgICAgICAgICBceDFiWzE7OTFtJyUoSyx1dWlkLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENla09wdGlvbkFjb3VudCh1dWlkLHB3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzICAgICAgICAgICAgICAgICAgIFx4MWJbMTs5MW0nJShLLHV1aWQscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignQ1AvQ1Ate30udHh0Jy5mb3JtYXQoaW5kbyksJ2EnKS53cml0ZSgnJXN8JXNcbiclKHV1aWQscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1AuYXBwZW5kKCdUQUknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6IHRpbWUuc2xlZXAoMzApCiAgICAgICAgbG9vcCArPTEKCiAgICBkZWYgVmFsaWRhdGUoc2VsZiwgdXNlciwgcHd4LCB1cmwpOgogICAgICAgIGdsb2JhbCBsb29wLCBPSywgQ1AKICAgICAgICBwcmludChmJ1xyIFwwMzNbOTdtUkFZQU4tWEQge0h9e3VybH17Tn0ge2xvb3B9L3tsZW4oSUQyKX0gT0s6e2xlbihPSyl9IENQOntsZW4oQ1ApfScsIGVuZD0nICcpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gcHd4OgogICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4OgogICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW4gPSBzZWxmLlVzZXJBZ2VudCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IHguZ2V0KCdodHRwczovL3t9L2xvZ2luL2RldmljZS1iYXNlZC9wYXNzd29yZC8/dWlkPXt9Jm5leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRndlYm1hc3RlciUyRiZmbG93PWxvZ2luX25vX3BpbiZyZWZzcmM9ZGVwcmVjYXRlZCZfcmRyJy5mb3JtYXQodXJsLHVzZXIpKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsnbHNkJzpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCdqYXpvZXN0JzpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwndWlkJzp1c2VyLCduZXh0JzonaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS93ZWJtYXN0ZXIvJywnZmxvdyc6J2xvZ2luX25vX3BpbicsJ2VuY3Bhc3MnOicjUFdEX0JST1dTRVI6MDp7fTp7fScuZm9ybWF0KHJhbmRvbS5yYW5kaW50KDAwMDAwMDAwMDAsIDk5OTk5OTk5OTkpLHB3KX0KICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkID0geydIb3N0JzogdXJsLCdjb250ZW50LWxlbmd0aCc6ICczMTknLCdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsJ3NlYy1jaC11YSc6ICciIE5vdCBBO0JyYW5kIjt2PSI5OSIsICJDaHJvbWl1bSI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iOTkiJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciQW5kcm9pZCInLCd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJzogJzEnLCdvcmlnaW4nOiAnaHR0cHM6Ly8nICsgdXJsLCdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywndXNlci1hZ2VudCc6IGFnZW4sJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLCdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLW9yaWdpbicsJ3NlYy1mZXRjaC1tb2RlJzogJ25hdmlnYXRlJywnc2VjLWZldGNoLXVzZXInOiAnPzEnLCdzZWMtZmV0Y2gtZGVzdCc6ICdkb2N1bWVudCcsJ3JlZmVyZXInOiAnaHR0cHM6Ly97fS9sb2dpbi9kZXZpY2UtYmFzZWQvcGFzc3dvcmQvP3VpZD17fSZuZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZ3ZWJtYXN0ZXIlMkYmZmxvdz1sb2dpbl9ub19waW4mcmVmc3JjPWRlcHJlY2F0ZWQmX3JkcicuZm9ybWF0KHVybCx1c2VyKSwnYWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43LHJ1O3E9MC42LGp2O3E9MC41J30KICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NoID0geC5wb3N0KCdodHRwczovL3t9L2xvZ2luL2RldmljZS1iYXNlZC92YWxpZGF0ZS1wYXNzd29yZC8/c2hibD0wJy5mb3JtYXQodXJsKSxkYXRhPWRhdGEsIGhlYWRlcnM9aGVhZCwgYWxsb3dfcmVkaXJlY3RzPUZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdjX3VzZXInIGluIHguY29va2llcy5nZXRfZGljdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga3VlaCA9ICc7Jy5qb2luKFtzdHIoYSkrJz0nK3N0cihiKSBmb3IgYSxiIGluIHguY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA9IHJlLnNlYXJjaCgnY191c2VyPSguKj8pOycsIGt1ZWgpLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlc3wlcyAgICAgICAgICAgICAnJShILHV1aWQscHcsa3VlaCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIFViYWhQdzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuVWJhaFBhc3N3b3JkKHV1aWQscHcsa3VlaCx1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOnBhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd5YScgaW4gYXBsaWthc2k6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNla19hcGsoa3VlaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6cGFzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignT0svT0ste30udHh0Jy5mb3JtYXQoaW5kbyksJ2EnKS53cml0ZSgnJXN8JXN8JXNcbiclKHVzZXIscHcsa3VlaCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPSy5hcHBlbmQoJ0RPU0EgTFUgQkFORyBNQUxJTkcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnY2hlY2twb2ludCcgaW4geC5jb29raWVzLmdldF9kaWN0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIE9wc2luZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzICAgICAgICAgICAgICAgICAgIFx4MWJbMTs5MW0nJShLLHVzZXIscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KHVzZXIscHcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXMgICAgICAgICAgICAgICAgICAgXHgxYlsxOzkxbSclKEssdXNlcixwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCdDUC9DUC17fS50eHQnLmZvcm1hdChpbmRvKSwnYScpLndyaXRlKCclc3wlc1xuJyUodXNlcixwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUC5hcHBlbmQoJ1RBSSBLVU5JTkcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjogdGltZS5zbGVlcCgzNSkKICAgICAgICBsb29wICs9MQoKICAgICMgTE9HSU4gUkVHVUxFUiBWMgogICAgZGVmIGNyYWNreHYyKHNlbGYsIHVzZXIsIHB3eCwgdXJsKToKICAgICAgICBnbG9iYWwgbG9vcCxPSyxDUAogICAgICAgIHByaW50KGYnXHIgXDAzM1s5N21SQVlBTi1YRCBWMiB7SH17dXJsfXtOfSB7bG9vcH0ve2xlbihJRDIpfSB7SH1PSzp7bGVuKE9LKX0ge0t9Q1A6e2xlbihDUCl9JywgZW5kPScgJyk7IHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGZvciBwdyBpbiBwd3g6CiAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoKICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VuID0gdWEKICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gcmVxdWVzdHMuZ2V0KGYnaHR0cHM6Ly97dXJsfS9sb2dpbi8/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGd2VibWFzdGVyJTJGJnJlZj1kYmwmZmwmbG9naW5fZnJvbV9heW1oPTEnKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJqYXpvZXN0IjpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwibV90cyI6cmUuc2VhcmNoKCduYW1lPSJtX3RzIiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksImxpIjpyZS5zZWFyY2goJ25hbWU9ImxpIiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksInRyeV9udW1iZXIiOiIwIiwidW5yZWNvZ25pemVkX3RyaWVzIjoiMCIsImVtYWlsIjp1c2VyLCJwYXNzIjpwdywibG9naW4iOiJNYXN1ayJ9CiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZCA9IHsnSG9zdCc6IHVybCwnY29udGVudC1sZW5ndGgnOiAnMjE1MicsJ3gtZmItbHNkJzogZGF0YVsnbHNkJ10sJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzEnLCd1c2VyLWFnZW50JzogYWdlbiwnc2VjLWNoLXVhJzogJyIgTm90IEE7QnJhbmQiO3Y9Ijk5IiwgIkNocm9taXVtIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSI5OSInLCdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkFuZHJvaWQiJywnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsJ2FjY2VwdCc6ICcqLyonLCdvcmlnaW4nOiAnaHR0cHM6Ly8nICsgdXJsLCdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLW9yaWdpbicsJ3NlYy1mZXRjaC1tb2RlJzogJ2NvcnMnLCdzZWMtZmV0Y2gtZGVzdCc6ICdlbXB0eScsJ3JlZmVyZXInOiAnaHR0cHM6Ly97fS9sb2dpbi8/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGd2VibWFzdGVyJTJGJnJlZj1kYmwmZmwmbG9naW5fZnJvbV9heW1oPTEnLmZvcm1hdCh1cmwpLCdhY2NlcHQtZW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLCdhY2NlcHQtbGFuZ3VhZ2UnOiAnaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcscnU7cT0wLjYsanY7cT0wLjUnfQogICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2ggPSBzZXMucG9zdChmJ2h0dHBzOi8ve3VybH0vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRndlYm1hc3RlciUyRiZhbXA7cmVmc3JjPWRlcHJlY2F0ZWQmYW1wO2x3dj0xMDAmYW1wO3JlZj1kYmwnLCBkYXRhPWRhdGEsaGVhZGVycz1oZWFkLGFsbG93X3JlZGlyZWN0cz1GYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnY191c2VyJyBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga3VlaCA9ICc7Jy5qb2luKFtzdHIoYSkrJz0nK3N0cihiKSBmb3IgYSxiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkID0gcmUuc2VhcmNoKCdjX3VzZXI9KC4qPyk7Jywga3VlaCkuZ3JvdXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzfCVzICAgICAgICAgICAgICAgICAgICAgICAnJShILHV1aWQscHcsa3VlaCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIFViYWhQdzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuVWJhaFBhc3N3b3JkKHV1aWQscHcsa3VlaCx1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOnBhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd5YScgaW4gYXBsaWthc2k6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNla19hcGsoa3VlaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6cGFzcwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ09LL09LLXt9LnR4dCcuZm9ybWF0KGluZG8pLCdhJykud3JpdGUoJyVzfCVzfCVzXG4nJSh1c2VyLHB3LGt1ZWgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT0suYXBwZW5kKCdET1NBJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkID0gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKVsiY2hlY2twb2ludCJdLnNwbGl0KCIlIilbNF0ucmVwbGFjZSgiM0EiLCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd5YScgaW4gT3BzaW5lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXMgICAgICAgICAgICAgICAgICAgXHgxYlsxOzkxbSclKEssdXVpZCxwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDZWtPcHRpb25BY291bnQodXVpZCxwdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlcyAgICAgICAgICAgICAgICAgICBceDFiWzE7OTFtJyUoSyx1dWlkLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ0NQL0NQLXt9LnR4dCcuZm9ybWF0KGluZG8pLCdhJykud3JpdGUoJyVzfCVzXG4nJSh1dWlkLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENQLmFwcGVuZCgnVEFJJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOiB0aW1lLnNsZWVwKDMwKQogICAgICAgIGxvb3AgKz0xCgogICAgZGVmIFViYWhQYXNzd29yZChzZWxmLCB1c2VyLCBwYXNzd29yZF9vbGQsIGNva2ksIHVybCk6CiAgICAgICAgdHJ5OnBhc3N3b3JkX25ldyA9IG9wZW4oJ3Bhc3N3b3JkX2JhcnVfa2FtdS50eHQnLCdyJykucmVhZCgpCiAgICAgICAgZXhjZXB0OnBhc3N3b3JkX25ldyA9IHBhc3N3b3JkX29sZAogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoKICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgbGluayA9IHNlcy5nZXQoZidodHRwczovL3t1cmx9L3NldHRpbmdzL3NlY3VyaXR5L3Bhc3N3b3JkLycsY29va2llcz17J2Nvb2tpZSc6Y29raX0pCiAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAnZmJfZHRzZyc6cmUuc2VhcmNoKCduYW1lPSJmYl9kdHNnIiB2YWx1ZT0iKC4qPykiJywgbGluay50ZXh0KS5ncm91cCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICdqYXpvZXN0JzpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBsaW5rLnRleHQpLmdyb3VwKDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkX2NoYW5nZV9zZXNzaW9uX2lkZW50aWZpZXInOnJlLnNlYXJjaCgnbmFtZT0icGFzc3dvcmRfY2hhbmdlX3Nlc3Npb25faWRlbnRpZmllciIgdmFsdWU9IiguKj8pIicsIGxpbmsudGV4dCkuZ3JvdXAoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAncGFzc3dvcmRfb2xkJzpwYXNzd29yZF9vbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAncGFzc3dvcmRfbmV3JzpwYXNzd29yZF9uZXcsCiAgICAgICAgICAgICAgICAgICAgICAgICAncGFzc3dvcmRfY29uZmlybSc6cGFzc3dvcmRfbmV3LAogICAgICAgICAgICAgICAgICAgICAgICAgJ3NhdmUnOidTaW1wYW4gcGVydWJhaGFuJwogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIGZpbmQgPSBwYXJzZShsaW5rLnRleHQsJ2h0bWwucGFyc2VyJykuZmluZCgnZm9ybScsbWV0aG9kPSdwb3N0JylbJ2FjdGlvbiddCiAgICAgICAgICAgICAgICAgICAgIHBvc2ggPSBzZXMucG9zdChmJ2h0dHBzOi8ve3VybH0nICsgZmluZCwgZGF0YT1kYXRhLCBjb29raWVzID0geydjb29raWUnOmNva2l9KQogICAgICAgICAgICAgICAgICAgICBpZiAnS2F0YSBTYW5kaSBUZWxhaCBEaXViYWgnIGluIHBvc2gudGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgICDigKIgJXNCZXJoYXNpbCBtZW5ndWJhaCBwYXNzd29yZCclKEgsTikpCiAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzICAg4oCiICVzR2FnYWwgbWVuZ3ViYWggcGFzc3dvcmQnJShNLE4pKQogICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnByaW50KCdcciAlcyAgIOKAoiAlc0dhZ2FsIG1lbmd1YmFoIHBhc3N3b3JkJyUoTSxOKSkKCiAgICBkZWYgY2VrX2FwayhzZWxmLGt1a2kpOgogICAgICAgIHRyeToKICAgICAgICAgICAgICAgYWt0aWYsa2FkYXJsdWFyc2EgPSAwLDAKICAgICAgICAgICAgICAgY29raSA9IHsiY29va2llIjonbm9zY3JpcHQ9MTsnICsga3VraX0KICAgICAgICAgICAgICAgbGluayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3NldHRpbmdzL2FwcHMvdGFiYmVkLz90YWI9YWN0aXZlIixjb29raWVzPWNva2kpCiAgICAgICAgICAgICAgIHBhcnogPSBwYXJzZShsaW5rLnRleHQsImh0bWwucGFyc2VyIikKICAgICAgICAgICAgICAgZGloaSA9IHBhcnouZmluZCgiZm9ybSIsbWV0aG9kPSJwb3N0IikKICAgICAgICAgICAgICAgY2FyaSA9IFtrb250b2wudGV4dCBmb3Iga29udG9sIGluIGRpaGkuZmluZF9hbGwoImgzIildCiAgICAgICAgICAgICAgIGlmIGxlbihjYXJpKSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyAgIOKAoiAlc1RpZGFrIGFkYSBhcGxpa2FzaSBha3RpZiAgICAgICAgICAgICAgICAgICAgICVzJyUoTSxQLCAnICcpKQogICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGZvciBtZW1layBpbiByYW5nZShsZW4oY2FyaSkpOgogICAgICAgICAgICAgICAgICAgICAgICBha3RpZiArPTEKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyICAgICAlcyVzLiAlcyVzIiUoSCxha3RpZixQLGNhcmlbbWVtZWtdLnJlcGxhY2UoIkRpdGFtYmFoa2FuIHBhZGEiLCIgRGl0YW1iYWhrYW4gcGFkYSIpKSkKCiAgICAgICAgICAgICAgIHByaW50KCcgJykKICAgICAgICAgICAgICAgbGluayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3NldHRpbmdzL2FwcHMvdGFiYmVkLz90YWI9aW5hY3RpdmUiLGNvb2tpZXM9Y29raSkKICAgICAgICAgICAgICAgcGFyeiA9IHBhcnNlKGxpbmsudGV4dCwiaHRtbC5wYXJzZXIiKQogICAgICAgICAgICAgICBkaWhpID0gcGFyei5maW5kKCJmb3JtIixtZXRob2Q9InBvc3QiKQogICAgICAgICAgICAgICBjYXJpID0gW2tvbnRvbC50ZXh0IGZvciBrb250b2wgaW4gZGloaS5maW5kX2FsbCgiaDMiKV0KICAgICAgICAgICAgICAgaWYgbGVuKGNhcmkpID09IDA6CiAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyAgIOKAoiAlc1RpZGFrIGFkYSBhcGxpa2FzaSBrYWRhcmx1YXJzYSAgICAgJXMnJShNLFAsICcgJykpCiAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIGZvciBtZW1layBpbiByYW5nZShsZW4oY2FyaSkpOgogICAgICAgICAgICAgICAgICAgICAgICAga2FkYXJsdWFyc2EgKz0xCiAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXHIgICAgICVzJXMuICVzJXMiJShNLGthZGFybHVhcnNhLFAsY2FyaVttZW1la10ucmVwbGFjZSgiS2VkYWx1d2Fyc2EiLCIgS2VkYWx1d2Fyc2EiKSkpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnByaW50KGYnXHIgICAgIHtNfSEge1B9VGlkYWsgZGFwYXQgbWVuZ2VjaGVrIGFwbGlrYXNpIGFrdGlmIGRhbiBrYWRhcmx1YXJzYSEgICAgCQknKQoKZGVmIGZvbGRlcigpOgogICAgdHJ5Om9zLm1rZGlyKCdPSycpCiAgICBleGNlcHQ6cGFzcwogICAgdHJ5Om9zLm1rZGlyKCdDUCcpCiAgICBleGNlcHQ6cGFzcwogICAgdHJ5Om9zLm1rZGlyKCdkYXRhJykKICAgIGV4Y2VwdDpwYXNzCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgojCW9zLnN5c3RlbSgnZ2l0IHB1bGwnKQoJZm9sZGVyKCkKIwlBcGlrZXlMb2dpbigpCgltZW51KCkK'))