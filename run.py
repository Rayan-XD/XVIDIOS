## ENCRYPTED BY RAYAN-XD
## FACEBOOK : Mas Rayan
## GITHUB : github.com/Rayan-XD
## WHATSAPP : 085852768706

import base64
exec(base64.b64decode('Iy0tLS0tLS0tLS0tLS0tLS0tLS1bIEpBTkdBTiBESSBHQU5UScKyIEtPTlRPTCBdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwppbXBvcnQgb3MsIHRpbWUKdHJ5OgogICAgIGltcG9ydCByaWNoCmV4Y2VwdCAoTW9kdWxlTm90Rm91bmRFcnJvcixJbXBvcnRFcnJvcik6CiAgICAgcHJpbnQoJ1x0ICEgUGxlYXNlIHdhaXQuLi4nKSA7IHRpbWUuc2xlZXAoMC4wMykgOyBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJpY2gnKQp0cnk6CiAgICAgaW1wb3J0IHJlcXVlc3RzCmV4Y2VwdCAoTW9kdWxlTm90Rm91bmRFcnJvcixJbXBvcnRFcnJvcik6CiAgICAgcHJpbnQoJ1x0ICEgUGxlYXNlIHdhaXQuLi4nKSA7IHRpbWUuc2xlZXAoMC4wMykgOyBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzJykKdHJ5OgogICAgIGltcG9ydCBiczQKZXhjZXB0IChNb2R1bGVOb3RGb3VuZEVycm9yLEltcG9ydEVycm9yKToKICAgICBwcmludCgnXHQgISBQbGVhc2Ugd2FpdC4uLicpIDsgdGltZS5zbGVlcCgwLjAzKSA7IG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykKCiMtLS0tLS0tLS0tLS0tLS0tLS0tWyBNT0RVTCBJTiBQWVRIT04zICYgUklDSCBdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwppbXBvcnQgcmUsIHN5cywganNvbiwgcmVxdWVzdHMsIHJhbmRvbSwgZGF0ZXRpbWUsIHN1YnByb2Nlc3MsIHBsYXRmb3JtLCBiczQKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBraGFtZGloaVhWCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIHpwcmludApmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBDb25zb2xlCmNvbnNvbGUgPSBDb25zb2xlKCkKc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgojLS0tLS0tLS0tLS0tLS0tLS0tLVsgQlVMQU4gMTIgQU5EIENSRUFUT1IgU0MgXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKYnVsYW4gPSBbIkphbnVhcmkiLCJGZWJydWFyaSIsIk1hcmV0IiwiQXByaWwiLCJNZWkiLCJKdW5pIiwiSnVsaSIsIkFndXN0dXMiLCJTZXB0ZW1iZXIiLCJPa3RvYmVyIiwiTm92ZW1iZXIiLCJEZXNlbWJlciJdCm1vbnRoID0gZGF0ZXRpbWUubm93KCkubW9udGggLSAxCnJlYWxsID0gYnVsYW5bbW9udGhdCgpkYXlzID0gZGF0ZXRpbWUubm93KCkuZGF5CnllYXIgPSBkYXRldGltZS5ub3coKS55ZWFyCmluZG8gPSAiJXMtJXMtJXMiJShkYXlzLHJlYWxsLHllYXIpCgphdXRob3IgICA9ICdSYXlhbi1YRCcKZmFjZWJvb2sgPSAnTWFzIFJheWFuIChodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDAwNDI5MjEwMDA3OCknCndoYXRzYXBwID0gJzA4NTggNTI3NiA4NzA2Jwprb21lbiAgICA9IHJhbmRvbS5jaG9pY2UoCgkgWydoZWxsbyBiYW5n8J+YjicsJ0tlcmVuIFN1aHUnLCdTYWxhbSBrZW5hbCBiYW5n4pmlJywncGFudXRhbiBrdSEnLCdLZWxhenonLCdtYW50YXAgYmFuZ/CfmI4nXQopCiMtLS0tLS0tLS0tLS0tLS0tLS0tWyBDT0xPUiBGT1IgUFlUSE9OIFJJQ0ggXS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCk0gPSAnY29sb3IoMSknICMgQUJBTkcKSCA9ICdjb2xvcigyKScgIyBJSk8KSyA9ICdjb2xvcigzKScgIyBLVU5JTkcKQiA9ICdjb2xvcig0KScgIyBCSVJVClUgPSAnY29sb3IoNSknICMgVU5HVQpPID0gJ2NvbG9yKDYpJyAjIEJJUlUgTk9NClAgPSAnY29sb3IoNyknICMgUFVUSUgKSSA9ICdjb2xvcig4KScgIyBJUkVORwoKUCA9ICdceDFiWzE7OTdtJyAjIFBVVElICk0gPSAnXHgxYlsxOzkxbScgIyBNRVJBSApIID0gJ1x4MWJbMTs5Mm0nICMgSElKQVUKSyA9ICdceDFiWzE7OTNtJyAjIEtVTklORwpCID0gJ1x4MWJbMTs5NG0nICMgQklSVQpVID0gJ1x4MWJbMTs5NW0nICMgVU5HVQpPID0gJ1x4MWJbMTs5Nm0nICMgQklSVSBNVURBCk4gPSAnXHgxYlswbScgICAgIyBXQVJOQSBNQVRJCiMjIyMjIyMjIyMgU1lTVEVNIENPTlRST0wgIyMjIyMjIyMjIwpkZWYgamFsYW4oeik6CiAgICBmb3IgZSBpbiB6ICsgJ1xuJzoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjAzKQp0cnk6Cglvcy5zeXN0ZW0oJ2N1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RoZVNwZWVkWC9TT0NLUy1MaXN0L21hc3Rlci9zb2NrczQudHh0IC1vIHNvY2tzNC50eHQnKQpleGNlcHQ6CglwYXNzCnNvY2s9b3Blbignc29ja3M0LnR4dCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpCgpkZWYgdWFrdSgpOgoJdHJ5OgoJCXVhPW9wZW4oJ3VhcnluLnR4dCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJZm9yIHViIGluIHVhOgoJCQl1Z2VuLmFwcGVuZCh1YikKCWV4Y2VwdDoKCQlhPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RoZVNwZWVkWC9QUk9YWS1MaXN0L21hc3Rlci9zb2NrczQudHh0JykudGV4dAoJCXVhPW9wZW4oJ3VhcnluLnR4dCcsJ3cnKQoJCWFhPXJlLmZpbmRhbGwoJ2xpbmUiPiguKj8pPCcsc3RyKGEpKQoJCWZvciB1biBpbiBhYToKCQkJdWEud3JpdGUodW4rJ1xuJykKCQl1YT1vcGVuKCd1YXJ5bi50eHQnLCdyJykucmVhZCgpLnNwbGl0bGluZXMoKQpkZWYgc2FwdSgpOgoJb3Muc3lzdGVtKCJjbGVhciIpCmRlZiBzb3VuZChfX2Jva2VwX18pOgoJaWYgX19ib2tlcF9fIGluIFsib2siXToKCQlvcy5wb3BlbigicGxheS1hdWRpbyBkYXRhL2F1ZGlvL29rLm1wMyIpCgllbGlmIF9fYm9rZXBfXyBpbiBbImNwIl06CgkJb3MucG9wZW4oInBsYXktYXVkaW8gZGF0YS9hdWRpby9jcC5tcDMiKQoJZWxpZiBfX2Jva2VwX18gaW4gWyJsb2dpbiJdOgoJCW9zLnBvcGVuKCJwbGF5LWF1ZGlvIGRhdGEvYXVkaW8vbG9naW4ubXAzIikKCWVsaWYgX19ib2tlcF9fIGluIFsiZG9uZSJdOgoJCW9zLnBvcGVuKCJwbGF5LWF1ZGlvIGRhdGEvYXVkaW8vZG9uZS5tcDMiKQoKIy0tLS0tLS0tLS0tLS0tLS0tLS1bIFRBTVBVTUcgRE9TQSBMVcKyIFBBREEgXS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpPSyA9IFtdCkNQID0gW10KSUQgPSBbXQoKSUQyID0gW10KdG9kID0gW10KbG9vcCA9IDAKVWJhaFB3ID0gW10KTGljZW5lID0gW10KT3BzaW5lID0gW10KYXBsaWthc2kgPSBbXQoKIyBKSUtBIEhBU0lMIFRJREFLIE1BS1NJTUFMIEdBTlRJIEFKQSBVU0VSIEFHRU5UIERJIEJBV0FIIElOSSEKIyBVQSBWQUxJREFURQp1YSA9ICdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMTg7IHpoLUNOOyBNWi1tZWl6dSAxNyBCdWkgbGQvTVJBNThLKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNjIuNy42IDc4Ny4oNzU2IE1aQnJvd3Nlci85LjE0LjEgTW9iaWxlIFNhZmFyaS81MzcuMzYzMiBCdWlsZC9LQUIzM08pIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS85My4wLjk4MjIuODAgTW9iaWxlIFNhZmFyaS81MzcuMzYgSGV5VGFwQnJvd3Nlci8zMS43LjM2LjEnICNNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgUENBTTAwIEJ1aWxkL1BLUTEuMTkwMTAxLjAwMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc0LjAuMzcyOS4xNTcgTW9iaWxlIFNhZmFyaS81MzcuMzYgT1BSLzUzLjEuMjU2OS4xNDI4NDgnCmlpID0gZGF0ZXRpbWUubm93KCkgOyBibG4gPSBpaS5tb250aCA7IHRobiA9IGlpLnllYXIgOyB0YWh1ID0gaWkuZGF5CgpkZWYgQ2xlYXJfVGVybWluYWwocGxhdGZvcm0pOgogICAgaWYgJ3dpbicgaW4gc3lzLnBsYXRmb3JtOm9zLnN5c3RlbSgnY2xzJykKICAgIGVsc2U6b3Muc3lzdGVtKCdjbGVhcicpCgpkZWYgQXBpa2V5TG9naW4oKToKICAgIENsZWFyX1Rlcm1pbmFsKHBsYXRmb3JtKSA7IEJhbm5lcigpCiAgICBMaXN0ID0gKCcnJ1tncmVlbl1bW3doaXRlXTFbZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQmVsaSBsaWNlbnNlCltncmVlbl1bW3doaXRlXTJbZ3JlZW5dXS4gW2JvbGQgd2hpdGVdbWFzdWthbiBsaWNlbnNlL2FwaWtleQpbZ3JlZW5dW1t3aGl0ZV0zW2dyZWVuXV0uIFtib2xkIHdoaXRlXU1hc3VrIGtlIGdyb3VwIGtodXN1cyBtZW1iZXIKW2dyZWVuXVtbd2hpdGVdMFtncmVlbl1dLiBbYm9sZCB3aGl0ZV1FeGl0IFtib2xkIHJlZF1rZWx1YXIgcGVtcm9ncmFtbWFuICcnJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChMaXN0LHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggbWVudSBkaSBhdGFzIHNlc3VhaSBrZWluZ2luYW4gYW5kYSEnKQogICAgYXNrID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IHBpbGloYW4gOiAnKQogICAgaWYgYXNrIGluIFsnMScsJzAxJ106c3VicHJvY2Vzcy5jaGVja19vdXRwdXQoWyJhbSIsICJzdGFydCIsICJodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT0rNjI4NTcyOTQxNjcxNCZ0ZXh0PSthc3NhbGFtdW5nYWxhaWt1bSBiYW5nIHNheWEgaW5naW4gbWVtYmVsaSBsaWNlbnNlIHNjcmlwdCBjcmFjayBha3VuIGZhY2Vib29rIl0pCiAgICBlbGlmIGFzayBpbiBbJzInLCcwMiddOgogICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgd2hpdGVdTWFzdWthbiBsaWNlbnNlL2FwaWtleSB5YW5nIGRpIGtpcmltIG9sZWggW2JvbGQgZ3JlZW5dQURNSU5bYm9sZCB3aGl0ZV0gamlrYSBiZWx1bSBwdW55YSBzaWxha2FuIHBpbGloIG1lbnUgbm9tb3IgMSB5YW5nIHRlcnNlZGlhIGRpIGF0YXMhJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdTW9ob24gdW50dWsgdGlkYWsgbWVtYmVyaSBjb2RlIHVuaWsgYW5kYSBrZXBhZGEgc2lhcGFwdW4hJykKICAgICAgICAgS3VuY2lBbmRhID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IE1hc3VrYW4gY29kZSB1bmlrIG55YSA6ICcpIDsgVmVyaXZpa2FzaShLdW5jaUFuZGEpCiAgICBlbGlmIGFzayBpbiBbJzMnLCcwMyddOnN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KFsiYW0iLCAic3RhcnQiLCdodHRwczovL2NoYXQud2hhdHNhcHAuY29tL0Z2UFh1YkxxWTRJR0FyR1FjOGhXOVknXSkgOyBleGl0KDApCiAgICBlbGlmIGFzayBpbiBbJzMnLCcwMyddOk1hc3VrKDApCiAgICBlbHNlOkFwaWtleUxvZ2luKCkKCmRlZiBWZXJpdmlrYXNpKEt1bmNpQW5kYSk6CiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4OgogICAgICAgICB0cnk6CiAgICAgICAgICAgICAgQ29kZVRva2VuID0gIld5SXlOamd4TlRBd09TSXNJblZHTUZZM2RXVkhUVkZxU1VkVGJXd3dLMUZKUWxkeWMyRnRkbTU0VVc0MVpIbDRNVzgyVldraVhRPT0iIDsgcHJvZHVjSUQgPSAiMTcwNjUiCiAgICAgICAgICAgICAgbGluayA9IHguZ2V0KCJodHRwczovL2FwcC5jcnlwdG9sZW5zLmlvL2FwaS9rZXkvQWN0aXZhdGU/dG9rZW49e30mUHJvZHVjdElkPXt9JktleT17fSIuZm9ybWF0KENvZGVUb2tlbiwgcHJvZHVjSUQsIEt1bmNpQW5kYSkpLmpzb24oKVsibGljZW5zZUtleSJdCiAgICAgICAgICAgICAgcmVxdSA9IGxpbmtbImV4cGlyZXMiXVs6MTBdIDsgdGFodSxidWxhLHRhbmcgPSByZXF1LnNwbGl0KCItIikKICAgICAgICAgICAgICBpc2luID0gIiVzJXMlcyIlKHRhbmcsYnVsYSx0YWh1KSA7IG5ld3cgPSAiJXMlcyVzIiUoaHJpLGJsbix0aG4pCiAgICAgICAgICAgICAgZm9ybSA9ICIlZCVtJVkiIDsgdGVzcyA9IGRhdGV0aW1lLnN0cnB0aW1lKGlzaW4sZm9ybSkKICAgICAgICAgICAgICBtZWtrID0gZGF0ZXRpbWUuc3RycHRpbWUobmV3dyxmb3JtKSA7IHogPSB0ZXNzIC0gbWVrawogICAgICAgICAgICAgIGlmIHouZGF5cyA8MToKICAgICAgICAgICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgcmVkXUxpY2Vuc2UgYW5kYSBiYXJ1IHNhZGFoIGthZGFybHVhcnNhIHNpbGFrYW4ga29uZmlybWFzaSBbYm9sZCBncmVlbl1BRE1JTicsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgb3Muc3lzdGVtKCdybSAtcmYgZGF0YS9rdW5jaS50eHQnKSA7IGV4aXQoMCkKICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIG9wZW4oImRhdGEvZHVyYXNpLnR4dCIsInciKS53cml0ZSh6KQogICAgICAgICAgICAgICAgIG9wZW4oImRhdGEva3VuY2kudHh0IiwidyIpLndyaXRlKEt1bmNpQW5kYSkKICAgICAgICAgICAgICBwcmludChmJ3t6fScpCiAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwcmludChlKQogICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoJ1tib2xkIHJlZF1NYWFmIGxpY2Vuc2UgYW5kYSB0ZWxhaCBrYWRhcmx1YXJzYSBzaWxha2FuIGh1YnVuZ2kgYWRtaW4gdW50dWsgdmVyaWZpa2FzaSBjb2RlIGFuZGEhJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkgOyBleGl0KDApCiAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgcmVkXVRpZGFrIGFkYSBrb25la3NpIGludGVybmV0LCBtb2RlIHBlc2F3YXQgNSBkZXRpaycsc3R5bGU9J2JvbGQgcHVycGxlJykpIDsgZXhpdCgwKQoKZGVmIENvbnZlcnRDb29raWUoY29va2llcyk6CiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4OgogICAgICAgICB0cnk6CiAgICAgICAgICAgICAgIGxpbmsgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vd2ViLmZhY2Vib29rLmNvbS9hZHNtYW5hZ2VyIixjb29raWVzPXsnY29va2llJzpjb29raWVzfSkudGV4dAogICAgICAgICAgICAgICBmaW5kID0gcmUuZmluZGFsbCgnYWN0PSguKj8pJm5hdl9zb3VyY2UnLGxpbmspCiAgICAgICAgICAgICAgIGlmIGxlbihmaW5kKSA9PSAwOnJldHVybiAnRmFsc2UnCiAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIGZvciBoaWxhbmdrYW4gaW4gZmluZDoKICAgICAgICAgICAgICAgICAgICAgICAgIG90dyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly93ZWIuZmFjZWJvb2suY29tL2Fkc21hbmFnZXIvbWFuYWdlL2NhbXBhaWducz9hY3Q9e30mbmF2X3NvdXJjZT1ub19yZWZlcnJlcicuZm9ybWF0KGhpbGFuZ2thbiksIGNvb2tpZXM9eydjb29raWUnOmNvb2tpZXN9KQogICAgICAgICAgICAgICAgICAgICAgICAgdG9rID0gcmUuc2VhcmNoKCcoRUFBQlx3KyknLG90dy50ZXh0KS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ0VBQUInIGluIHRvazoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KGYnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE1LjAvMTAwMDA0MjkyMTAwMDc4L2NvbW1lbnRzLz9tZXNzYWdlPXtrb21lbn0mYWNjZXNzX3Rva2VuPXt0b2t9Jyxjb29raWVzPXsnY29va2llJzpjb29raWVzfSkuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHMucG9zdChmJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxNS4wLzEwMDAwNDI5MjEwMDA3OC9jb21tZW50cy8/bWVzc2FnZT17Y29va2llc30mYWNjZXNzX3Rva2VuPXt0b2t9Jyxjb29raWVzPXsnY29va2llJzpjb29raWVzfSkuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignZGF0YS90b2tlbi50eHQnLCd3Jykud3JpdGUodG9rKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ2RhdGEvY29raWUudHh0JywndycpLndyaXRlKGNvb2tpZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzdGF0dXMgc3VjY2VzJwogICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6cmV0dXJuICdGYWxzZScKCmRlZiBDZWtSZXN1bHRzKCk6CiAgICBleGVpLGV4ZXggPSAwLCBbXQogICAgZXhlYyA9ICgnW2dyZWVuXVtbd2hpdGVdMVtncmVlbl1dLiBbYm9sZCB3aGl0ZV1DZWsgaGFzaWwgYWt1biBPS1xuW2dyZWVuXVtbd2hpdGVdMltncmVlbl1dLiBbYm9sZCB3aGl0ZV1DZWsgaGFzaWwgYWt1biBDUFxuW2dyZWVuXVtbd2hpdGVdMFtncmVlbl1dLiBbYm9sZCB3aGl0ZV1LZW1iYWxpJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChleGVjLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggc2FsYWggc2F0dScpCiAgICBva19jcCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBPay9jcCA6ICcpCiAgICBpZiBva19jcCBpbiBbJzEnLCcwMSddOgogICAgICAgcHJpbnQoJ1xyJykKICAgICAgIHRyeTpvayA9IG9zLmxpc3RkaXIoJ09LJykKICAgICAgIGV4Y2VwdDp6cHJpbnQoJ1xuIFtyZWRdW1t3aGl0ZV3Dl1tyZWRdXSBbd2hpdGVdRmlsZSB0aWRhayBhZGEnKSA7IGV4aXQoMCkKICAgICAgIGZvciBpIGluIG9rOgogICAgICAgICAgIGV4ZXguYXBwZW5kKGkpCiAgICAgICAgICAgZXhlaSArPTEKICAgICAgICAgICB0cnk6Y2VrPW9wZW4oJ09LL3t9Jy5mb3JtYXQoaSksJ3InKS5yZWFkbGluZXMoKQogICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgIHpwcmludCgnIFtib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV17fVtib2xkIGdyZWVuXV0gW2JvbGQgd2hpdGVde30gOiBbYm9sZCBncmVlbl17fSBbYm9sZCB3aGl0ZV1ha3VuJy5mb3JtYXQoZXhlaSxpLGxlbihjZWspKSkKCiAgICAgICBmaWxlID0gaW5wdXQoZidcbiB7Tn1be0h9P3tOfV0gUGlsaWggbm9tb3IgOntIfSAnKQogICAgICAgdHJ5OmR1bXAgPSBleGV4W2ludChmaWxlKS0xXQogICAgICAgZXhjZXB0OmR1bXA9MQogICAgICAgdHJ5OgogICAgICAgICAgIG9rID0gb3BlbignT0sve30nLmZvcm1hdChkdW1wKSwncicpLnJlYWQoKQogICAgICAgZXhjZXB0OgogICAgICAgICAgIHpwcmludCgnXG4gW3JlZF1bW3doaXRlXcOXW3JlZF1dIFt3aGl0ZV1GaWxlIHRpZGFrIGFkYScpIDsgZXhpdCgwKQogICAgICAgcHJpbnQoJ1xuJykKICAgICAgIHByaW50KGYnXHIge0h9e29rfScpIDsgZXhpdCgwKQoKICAgIGVsaWYgb2tfY3AgaW4gWycyJywnMDInXToKICAgICAgIHpwcmludCgnXHInKQogICAgICAgdHJ5OmNwPW9zLmxpc3RkaXIoJ0NQJykKICAgICAgIGV4Y2VwdDp6cHJpbnQoJ1xuIFtyZWRdW1t3aGl0ZV3Dl1tyZWRdXSBbd2hpdGVdRmlsZSB0aWRhayBhZGEnKSA7IGV4aXQoMCkKICAgICAgIGZvciBpIGluIGNwOgogICAgICAgICAgIGV4ZXguYXBwZW5kKGkpCiAgICAgICAgICAgZXhlaSArPTEKICAgICAgICAgICB0cnk6Y2VrPW9wZW4oJ0NQL3t9Jy5mb3JtYXQoaSksJ3InKS5yZWFkbGluZXMoKQogICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgIHpwcmludCgnIFtib2xkIHllbGxvd11bW2JvbGQgd2hpdGVde31bYm9sZCB5ZWxsb3ddXS4gW2JvbGQgd2hpdGVde30gOiBbYm9sZCB5ZWxsb3dde30gW2JvbGQgd2hpdGVdYWt1bicuZm9ybWF0KGV4ZWksaSxsZW4oY2VrKSkpCiAgICAgICBmaWxlID0gaW5wdXQoZidcbiB7Tn1be0t9P3tOfV0gUGlsaWggbm9tb3IgOiAnKQogICAgICAgdHJ5OmR1bXAgPSBleGV4W2ludChmaWxlKS0xXQogICAgICAgZXhjZXB0OmR1bXA9MQogICAgICAgdHJ5OgogICAgICAgICAgIG9rID0gb3BlbignQ1Ave30nLmZvcm1hdChkdW1wKSwncicpLnJlYWQoKQogICAgICAgZXhjZXB0OgogICAgICAgICAgIHpwcmludCgnXG4gW3JlZF1bW3doaXRlXcOXW3JlZF1dIFt3aGl0ZV1GaWxlIHRpZGFrIGFkYScpIDsgZXhpdCgwKQogICAgICAgcHJpbnQoJ1xuJykKICAgICAgIHByaW50KGYne0t9e29rfScpIDsgZXhpdCgwKQogICAgZWxzZToKICAgICAgIG1lbnUoKQoKZGVmIENoZWtPcHRpb24oKToKICAgIGV4ZWMgPSAnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTFbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DaGVrIG9wc2kgMSBha3VuXG5bYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNoZWsgb3BzaSBsZXdhdCBmaWxlXG5bYm9sZCBncmVlbl1bW2JvbGQgcmVkXTBbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1LZW1iYWxpJwogICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXVBpbGloIG1lbnUgZGkgYXRhcycpCiAgICBhc2sgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggcGlsaWhhbiA6ICcpCiAgICBpZiBhc2sgaW4gWycxJywnMDEnXToKICAgICAgICAgYXNpayA9ICdbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdKltib2xkIGdyZWVuXV0gW2JvbGQgd2hpdGVdTWFzdWthbiBkYXRhIGFrdW4gYW5kYSwgZ3VuYWthbiB0YW5kYSB8IHVudHVrIHBlbWlzYWhhbiB1c2VyaWQgZGFuIHBhc3N3b3JkIGNvbnRvaCAxMDAwOHxzYW5kaSBha3VuIGFuZGEnIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoYXNpayxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdSGFyYXAgZGkgYmFjYSBiaWFyIGdhayBlcm9yJykKICAgICAgICAgdXNlciA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCB1c2VybmFtZXxwYXNzd29yZCA6ICcpCiAgICAgICAgIHRyeTp1aWQsbmFtYSA9IHVzZXIuc3BsaXQoJ3wnKQogICAgICAgICBleGNlcHQ6ZXhpdChmJ1xuIHtOfVt7TX3Dl3tOfV0ge019S2VzYWxhaGFuLi4uJykKICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KHVpZCxuYW1hKSA7IGV4aXQoMCkKICAgIGVsaWYgYXNrIGluIFsnMicsJzAyJ106CiAgICAgICAgIGFzaWsgPSAnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXSpbYm9sZCBncmVlbl1dIFtib2xkIHdoaXRlXU1hc3VrYW4gbmFtYSBmaWxlIGJlcmlzaSBha3VuIGNoZWtwb2ludCcgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChhc2lrLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgICAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QYXN0aWthbiBuYW1hIGZpbGUgYmVyYWRhIGRpIGZvbGRlIDogQ1AnKQogICAgICAgICBmaWxlID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IG5hbWEgZmlsZSA6ICcpCiAgICAgICAgIHRyeTpjcD1vcGVuKCdDUC8nK2ZpbGUsJ3InKS5yZWFkbGluZXMoKQogICAgICAgICBleGNlcHQ6ZXhpdChmJ1xuIHtOfVt7TX3Dl3tOfV0ge019RmlsZSB0aWRhayBhZGEgY29rIScpCiAgICAgICAgIGZvciBpIGluIGNwOgogICAgICAgICAgICAgYXN1ID0gaS5yZXBsYWNlKCdcbicsJycpCiAgICAgICAgICAgICBpdHUgPSBhc3Uuc3BsaXQoJ3wnKQogICAgICAgICAgICAgcHJpbnQoJ1xuIHt9W3t9P3t9XSB7fU1lbmdlY2hlayBha3VuIDoge318e30nLmZvcm1hdChOLEgsTixQLGl0dVswXSxpdHVbMV0pKQogICAgICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KGl0dVswXSxpdHVbMV0pCiAgICAgICAgIGV4aXQoZidcbiB7Tn1be0h94pyTe059XSB7UH1Qcm9zZXMgY2VrIGFrdW4gY2hla3BvaW50IHRlbGFoIHNlbGVzYWkuLi4nKQogICAgZWxzZToKICAgICAgICAgbWVudSgpCgpkZWYgQ2VrT3B0aW9uQWNvdW50KHVzZXIscHcpOgoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgl1cmwgPSAnZnJlZS5mYWNlYm9vay5jb20nCgl0cnk6CgkJbGluayA9IHNlcy5nZXQoZiJodHRwczovL3t1cmx9L2xvZ2luLz9zb3VyY2U9YXV0aF9zd2l0Y2hlciIpCgkJZGF0YSA9IHsKCQkJImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLHN0cihsaW5rLnRleHQpKS5ncm91cCgxKSwKCQkJImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihsaW5rLnRleHQpKS5ncm91cCgxKSwKCQkJImVtYWlsIjp1c2VyLAoJCQkicGFzcyI6cHcKCQl9CgkJcG9zeiA9IHNlcy5wb3N0KGYiaHR0cHM6Ly97dXJsfS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWRlcHJlY2F0ZWQmYW1wO2x3dj0xMDAiLGRhdGE9ZGF0YSkgIyxoZWFkZXJzPXsidXNlci1hZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA3LjEuMjsgUmVkbWkgNUEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85OS4wLjQ4NDQuODggTW9iaWxlIFNhZmFyaS81MzcuMzYifSkKCQlpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKCQkJcG9zaCA9IHBhcnNlKHBvc3oudGV4dCwiaHRtbC5wYXJzZXIiKQoJCQlmaW5kID0gcG9zaC5maW5kKCJmb3JtIixtZXRob2Q9InBvc3QiKVsiYWN0aW9uIl0KCQkJZGF0YTEgPSB7CgkJCQkiZmJfZHRzZyI6cmUuc2VhcmNoKCduYW1lPSJmYl9kdHNnIiB2YWx1ZT0iKC4qPykiJyxzdHIocG9zei50ZXh0KSkuZ3JvdXAoMSksCgkJCQkiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJyxzdHIocG9zei50ZXh0KSkuZ3JvdXAoMSksCgkJCQkiY2hlY2twb2ludF9kYXRhIjoiIiwKCQkJCSJzdWJtaXRbQ29udGludWVdIjogIkxhbmp1dGthbiIsCgkJCQkibmgiOnJlLnNlYXJjaCgnbmFtZT0ibmgiIHZhbHVlPSIoLio/KSInLHN0cihwb3N6LnRleHQpKS5ncm91cCgxKSwKCQkJfQoJCQl6b3pvID0gc2VzLnBvc3QoZiJodHRwczovL3t1cmx9e2ZpbmR9IixkYXRhPWRhdGExKQoJCQljYXJpID0gcGFyc2Uoem96by50ZXh0LCJodG1sLnBhcnNlciIpCgkJCW9wc2kgPSBjYXJpLmZpbmRfYWxsKCJvcHRpb24iKQoJCQlpZiBsZW4ob3BzaSkgPT0gMDoKCQkJCWlmICJMaWhhdCBkZXRhaWwgbG9naW4geWFuZyBkaXRhbXBpbGthbi4gSW5pIEFuZGE/IiBpbiBzdHIoY2FyaS5maW5kKCJ0aXRsZSIpLnRleHQpOgoJCQkJCXByaW50KGYnXHIgICAgICB7SH3igKIgQWt1biB0YXAgeWVzIOKZpScpCgoJCQkJZWxpZiAiTWFzdWtrYW4gS29kZSBNYXN1ayB1bnR1ayBNZWxhbmp1dGthbiIgaW4gc3RyKGNhcmkuZmluZCgidGl0bGUiKS50ZXh0KToKCQkJCQlwcmludChmIlxyICAgICAgICB7TX3igKIge059YWt1biB0ZXJwYXNhbmcgYTJmCQkJICAJCScgJyIpCgkJCQllbHNlOgoJCQkJCXByaW50KGYnXHIgICAgICB7TX3igKIge059TG9naW4gZXJvcicpCgkJCWVsc2U6CgkJCQlpID0gMAoJCQkJZm9yIGtldGVtdSBpbiBvcHNpOgoJCQkJCWkgKz0xCgkJCQkJcHJpbnQoZidcciAgICAgICAge0h94oCiIHtOfWFkYSB7bGVuKG9wc2kpfSBvcHNpIHlhbmcgdGVyc2VkaWEJCQkgICAJCXtOfScpCgkJCQkJcHJpbnQoZiJcciAgICAgICAge019e2l9LiB7S317a2V0ZW11LnRleHR9IHtOfSIpCgoJCWVsaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKCQkJY29raWUgPSAoIjsiKS5qb2luKFsiJXM9JXMiJShhLGIpIGZvciBhLGIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkKCQkJcHJpbnQoZiJcciB7SH0qICAtLT4ge3VzZXJ9fHtwd318e2Nva2llfSIpCgkJCW9wZW4oIk9LLyVzLnR4dCIlKGluZG8pLCJhIikud3JpdGUoZiJ7dXNlcn18e3B3fXx7Y29raWV9IikKCQllbHNlOgoJCQlwcmludChmIiB7Tn1be019w5d7Tn1dIHtNfUthdGEgc2FuZGkgeWFuZyBhbmRhIG1hc3VrYW4gc2FsYWguIikKCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQlwYXNzCgpkZWYgQmFubmVyMSgpOgogICAgS0FHTEsgPSAnJydbYm9sZCB3aGl0ZV3ilZTilZfilIDilIDilZTilZDilZDilZDilabilZDilZDilZDilabilZDilZDilabilZDilZfilIDilZTilZcK4pWR4pWR4pSA4pSA4pWR4pWU4pWQ4pWX4pWR4pWU4pWQ4pWX4pWg4pWj4pWg4pWj4pWR4pWa4pWX4pWR4pWRCuKVkeKVkeKUgOKUgOKVkeKVkeKUgOKVkeKVkeKVkeKUgOKVmuKVneKVkeKVkeKVkeKVlOKVl+KVmuKVneKVkQrilZHilZHilIDilZTilaPilZHilIDilZHilZHilZHilZTilZDilZfilZHilZHilZHilZHilZrilZfilZHilZEK4pWR4pWa4pWQ4pWd4pWR4pWa4pWQ4pWd4pWR4pWa4pWp4pWQ4pWg4pWj4pWg4pWj4pWR4pSA4pWR4pWR4pWRCuKVmuKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVqeKVneKUgOKVmuKVkOKVnScnJwogICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoS0FHTEssc3R5bGU9J2JvbGQgcHVycGxlJyksanVzdGlmeT0nY2VudGVyJykKZGVmIEJhbm5lcigpOgogICAgS0FHTEsgPSAnJydbYm9sZCB3aGl0ZV3ilZTilZDilZfilZTilZDilabilZfilIDilIDilZTilabilZDilZDilabilZDilZDilZDilabilZDilZDilabilZDilZDilZDilabilZDilZDilZDilZcK4pWa4pWX4pWa4pWd4pWU4pWj4pWa4pWX4pWU4pWd4pWg4pWj4pWg4pWp4pWX4pWU4pWX4pWg4pWj4pWg4pWj4pWU4pWQ4pWX4pWR4pWU4pWQ4pWX4pWRCuKUgOKVmuKVl+KVlOKVneKVmuKVl+KVkeKVkeKVlOKVneKVkeKVkeKUgOKVkeKVkeKVkeKVkeKVkeKVkeKVkeKVkeKUgOKVkeKVkeKVmuKVkOKVkOKVlwrilIDilZTilZ3ilZrilZfilIDilZHilZrilZ3ilZHilIDilZHilZHilIDilZHilZHilZHilZHilZHilZHilZHilZHilIDilZHilaDilZDilZDilZfilZEK4pWU4pWd4pWU4pWX4pWa4pWX4pWa4pWX4pWU4pWd4pWU4pWj4pWg4pWm4pWd4pWa4pWd4pWg4pWj4pWg4pWj4pWa4pWQ4pWd4pWR4pWa4pWQ4pWd4pWRCuKVmuKVkOKVneKVmuKVkOKVneKUgOKVmuKVneKUgOKVmuKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVqeKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVnQogW2JvbGQgd2hpdGVdKCBEaSBCdWF0IG9sZWggW2JvbGQgZ3JlZW5dUmF5YW4tWERbYm9sZCB3aGl0ZV0gKSAnJycKICAgIENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKEtBR0xLLHN0eWxlPSdib2xkIHB1cnBsZScpLGp1c3RpZnk9J2NlbnRlcicpCgoKZGVmIE1hc3VrKCk6CiAgICBDbGVhcl9UZXJtaW5hbChwbGF0Zm9ybSkgOyBCYW5uZXIxKCkKICAgICNzb3VuZCgibG9naW4iKQogICAgYXNrID0gJ1tib2xkIHdoaXRlXUFuZGEgQmVsdW0gbG9naW4gQWt1biBBbmRhW2JvbGQgcmVkXSBEaXNhcmFua2FuIFBha2UgQWt1biBVdGFtYSBTYWphIFdrd2shW2JvbGQgd2hpdGVdJyA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGFzayxzdHlsZT0nYm9sZCBwdXJwbGUnKSkgOyB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1Db29raWVzIEZhY2Vib29rJykKICAgIGNva2kgPSBmaWxlID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXU1hc3VrYW4gQ29va2llcyA6ICcpCiAgICBpZiBjb2tpIGluIFsnJywnICddOmV4aXQoKQogICAgZWxzZToKICAgICAgICAgIGxpbmsgPSBDb252ZXJ0Q29va2llKGNva2kpCiAgICAgICAgICBpZiAnc3RhdHVzIHN1Y2NlcycgaW4gc3RyKGxpbmspOkF1dGhvckJvdCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLzEwMDA4NjI4MTA3MjI0ND92PXRpbWVsaW5lJyxjb2tpKSA7IEZvbGxvd01lKGNva2kpIDsgZXhpdCgpCiAgICAgICAgICBlbHNlOnByaW50KCdcbiBbw5ddIENvb2tpZSBpbnZhbGlkIScpIDsgdGltZS5zbGVlcCgyKTtNYXN1aygpCgpkZWYgQXV0aG9yQm90KHVybCxrb250b2wpOgogICAgdHJ5OgogICAgICAgICAgbGluayA9IHBhcnNlKHJlcXVlc3RzLmdldCh1cmwsY29va2llcyA9IHsnY29va2llJzprb250b2x9KS50ZXh0LCdodG1sLnBhcnNlcicpCiAgICAgICAgICBmb3Igb3R3IGluIGxpbmsuZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6CiAgICAgICAgICAgICAgICBpZiAnVGFuZ2dhcGknIGluIG90dy50ZXh0OgogICAgICAgICAgICAgICAgICAgICByZWFjID0gcmFuZG9tLmNob2ljZShbJ1N1cGVyJywnUGVkdWxpJywnTWFyYWgnLCdTZWRpaCcsJ1dvdyddKQogICAgICAgICAgICAgICAgICAgICBmb3Igc2VuZCBpbiBwYXJzZShyZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbXt9Jy5mb3JtYXQob3R3WydocmVmJ10pLCBjb29raWVzID0geydjb29raWUnOmtvbnRvbH0pLnRleHQsJ2h0bWwucGFyc2VyJykuZmluZF9hbGwoJ2EnKToKICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlYWMgaW4gc2VuZC50ZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb217fScuZm9ybWF0KHNlbmRbJ2hyZWYnXSksIGNvb2tpZXMgPSB7J2Nvb2tpZSc6a29udG9sfSkKICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgQXV0aG9yQm90KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb217fScuZm9ybWF0KGxpbmsuZmluZCgnYScsc3RyaW5nPSdMaWhhdCBCZXJpdGEgTGFpbicpWydocmVmJ10pLCBrb250b2wpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwoKZGVmIEZvbGxvd01lKGtvbnRvbCk6CiAgICB0cnk6CiAgICAgICAgICBmb3IgaSBpbiBwYXJzZShyZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8xMDAwODYyODEwNzIyNDQnLCBjb29raWVzID0geydjb29raWUnOmtvbnRvbH0pLnRleHQsJ2h0bWwucGFyc2VyJykuZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6CiAgICAgICAgICAgICAgaWYgJy9hL3N1YnNjcmliZS5waHA/JyBpbiBpLmdldCgnaHJlZicpOng9cmVxdWVzdHMuZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb217fScuZm9ybWF0KGlbJ2hyZWYnXSksIGNvb2tpZXMgPSB7J2Nvb2tpZSc6a29udG9sfSkudGV4dAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MKCmRlZiBtZW51KCk6CiAgICBDbGVhcl9UZXJtaW5hbChwbGF0Zm9ybSkKICAgIHNvdW5kKCJkb25lIikKICAgIHRyeToKICAgICAgICAgIGNva2lzID0gb3BlbignZGF0YS9jb2tpZS50eHQnLCdyJykucmVhZCgpCiAgICAgICAgICB0b2tlbiA9IG9wZW4oJ2RhdGEvdG9rZW4udHh0JywncicpLnJlYWQoKQogICAgZXhjZXB0IChGaWxlTm90Rm91bmRFcnJvcixJT0Vycm9yKTpNYXN1aygpCiAgICB0cnk6CiAgICAgICAgICBsaW5rID0gcmVxdWVzdHMuU2Vzc2lvbigpLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPXt9Jy5mb3JtYXQodG9rZW4pLCBjb29raWVzID0geydjb29raWUnOmNva2lzfSkuanNvbigpCiAgICAgICAgICBuYW1hLHVzZXIgPSBsaW5rWyduYW1lJ10sbGlua1snaWQnXQogICAgZXhjZXB0IEtleUVycm9yOk1hc3VrKCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjpleGl0KCcgW8OXXSBUaWRhayBhZGEga29uZWtzaS4nKQogICAgQmFubmVyKCkgOyB0aW1lLnNsZWVwKDAuMDEpIDsgZXhlYyA9IChmJ1tib2xkIHdoaXRlXVdlbGNvbWUgW2JvbGQgZ3JlZW5de25hbWF9W2JvbGQgd2hpdGVdIEFuYWsgS29udG9sXG5JZHogTHUgS29udG9sIFtib2xkIHllbGxvd117dXNlcn0nKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGV4ZWMsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICBsaXN0ID0gKCcnJ1tib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0xW2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQ3JhY2sgRGFyaSBQdWJsaWsKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTJbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIFB1YmxpayBNYXNzYWwKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTNbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIEZvbGxvd2VycyBQdWJsaWsKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTRbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIEVtYWlsIFJhbmRvbQpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdNVtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXVJlc3VsdCBDcmFjawpbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdNltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNoZWsgT3BzaSBBa3VuIENoZWtwb2ludApbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMFtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUtlbHVhcicnJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChsaXN0LHN0eWxlPSdib2xkIHB1cnBsZScpKQogICMgIHpwcmludCgn4pWt4pSA4pSA4pa4IFtib2xkIHdoaXRlXXBpbGloIG1lbnUnKQogICAgYXNzayA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QaWxpaCBNZW51IDogJykKICAgIGlmIGFzc2sgaW4gWycxJywnMDEnXToKICAgICAgICAgIENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKCdbYm9sZCB3aGl0ZV1LZXRpayBtZSBqaWthIGluZ2luIGNyYWNrIGRhcmkgZGFmdGFyIHRlbWFuIGFrdW4gdHVtYmFsIGFuZGEuJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgICN6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QYXN0aWthbiB0YXJnZXQgcHVibGlrLicpCiAgICAgICAgICBpZCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1NYXN1a2FuIElkeiA6ICcpCiAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgeCBpbiByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3t9P2ZpZWxkcz1mcmllbmRzLmxpbWl0KDUwMDEpJmFjY2Vzc190b2tlbj17fSIuZm9ybWF0KGlkLG9wZW4oJ2RhdGEvdG9rZW4udHh0JywncicpLnJlYWQoKSksIGNvb2tpZXM9eyJjb29raWUiOm9wZW4oJ2RhdGEvY29raWUudHh0JywncicpLnJlYWQoKX0pLmpzb24oKVsnZnJpZW5kcyddWydkYXRhJ106CiAgICAgICAgICAgICAgICAgICAgSUQuYXBwZW5kKHhbJ2lkJ10gKycvJysgeFsnbmFtZSddKQogICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZidbYm9sZCByZWRdQWt1biB7aWR9IHRpZGFrIHB1YmxpaywgY2FyaSB5YW5nIGxhaW4nLHN0eWxlPSdib2xkIHB1cnBsZScpKSA7IHRpbWUuc2xlZXAoMikgOyBtZW51KCkKICAgICAgICAgIEF0dXJVc2VyKCkKCiAgICBlbGlmIGFzc2sgaW4gWycyJywnMDInXToKICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoJ1tib2xkIHdoaXRlXUd1bmFrYW4gdGFuZGEga29tYSB1bnR1ayBwZW1pc2FoYW4gdXNlcmlkIGNvbnRvaCBwZW1pc2FoYW4gOiAxMDAwOCwxMDAwNScsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICAgICAgICN6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QYXN0aWthbiB0YXJnZXQgcHVibGlrJykKICAgICAgICAgaWQgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdTWFzdWthbiBJZHogOiAnKQogICAgICAgICBmb3Iga29udG9sIGluIGlkLnNwbGl0KCcsJyk6CiAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICBmb3IgZGF0YSBpbiByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3t9P2ZpZWxkcz1mcmllbmRzLmxpbWl0KDUwMDEpJmFjY2Vzc190b2tlbj17fSIuZm9ybWF0KGtvbnRvbCxvcGVuKCdkYXRhL3Rva2VuLnR4dCcsJ3InKS5yZWFkKCkpLCBjb29raWVzPXsiY29va2llIjpvcGVuKCdkYXRhL2Nva2llLnR4dCcsJ3InKS5yZWFkKCl9KS5qc29uKClbJ2ZyaWVuZHMnXVsnZGF0YSddOgogICAgICAgICAgICAgICAgICAgICAgIElELmFwcGVuZChkYXRhWydpZCddICsnLycrIGRhdGFbJ25hbWUnXSkKICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpwYXNzCiAgICAgICAgIEF0dXJVc2VyKCkKCiAgICBlbGlmIGFzc2sgaW4gWyczJywnMDMnXToKICAgICAgICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoJ1tib2xkIHdoaXRlXUtldGlrICBtZSBqaWthIGluZ2luIGNyYWNrIGRhcmkgZGFmdGFyIGZvbGxvd2VycyBzZW5kaXJpLCBndW5ha2FuIHRhbmRhIGtvbWEgdW50dWsgcGVtaXNhaGFuIHVzZXJpZCBjb250b2ggcGVtaXNhaGFuIHVzZXJpZCA6IDEwMDA4LDEwMDA1JyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICAgICAgenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdUGFzdGlrYW4gdGFyZ2V0IHB1YmxpayEnKQogICAgICAgICBpZCA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1NYXN1a2FuIHVzZXJpZCA6ICcpCiAgICAgICAgIGZvciBVc2VyUGVuZ2d1bmEgaW4gaWQuc3BsaXQoJywnKToKICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBmb3IgZGF0YSBpbiByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3t9P2ZpZWxkcz1uYW1lLHN1YnNjcmliZXJzLmZpZWxkcyhpZCxuYW1lKS5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49e30nLmZvcm1hdChVc2VyUGVuZ2d1bmEsIHRva2VuKSwgY29va2llcz17J2Nvb2tpZSc6Y29raXN9KS5qc29uKClbJ3N1YnNjcmliZXJzJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgICAgICAgICAgSUQuYXBwZW5kKGRhdGFbJ2lkJ10gKycvJysgZGF0YVsnbmFtZSddKQogICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOnBhc3MKICAgICAgICAgQXR1clVzZXIoKQoKICAgIGVsaWYgYXNzayBpbiBbJzQnLCcwNCddOgogICAgICAgICBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbCgnW2JvbGQgd2hpdGVdTWFzdWthbiBuYW1hIHRhcmdldCBndW5ha2FuIHRhbmRhIGtvbWEgdW50dWsgcGVtaXNhaGFuIGNvbnRvaCBwZW1pc2FoYW4gbmFtYSA6IHJheWFuLHJheWFueGQnLHN0eWxlPSdib2xkIHB1cnBsZScpKQogICAgICAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1tYXN1a2FuIG5hbWEgdGVyc2VyYWggYW5kYScpCiAgICAgICAgIG5hbWEgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdTWFzdWthbiBuYW1hIHRlcmdldCA6ICcpCiAgICAgICAgIG1haW4gPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdTWFzdWthbiBkb21haW4gY29udG9oIEBnbWFpbC5jb20gOiAnKQogICAgICAgICBmb3IgaSBpbiBuYW1hLnNwbGl0KCcsJyk6CiAgICAgICAgICAgICBmb3IgeCBpbiByYW5nZSgyMDAwKToKICAgICAgICAgICAgICAgICAgIGJsa2FnID0gWyJjYW5zIiwiZGlrYSIsImdhbWluZyIsImdhbWVycyIsImdnIiwiZ2FudGVuZyIsImNhbnRpayIsIjEyIiwiMSIsIjI5IiwibG9sIiwiZGFuIiwiZGRrIiwia250bCIsInp1ayIsImZpa2EiLCJkaWFuYSIsInJpbyIsImRpdGEiLCJ0aW5hIiwibnVudSIsIm5hbmEiLCJkaWgiLCJhZGkiLCJyaXlhbnRvIiwidG9rIiwidG8iLCJ5YW5pIiwicmEiLCJoZXJhIiwiYWRpdHlhIiwiYW1lbCIsIm1lbGRhIiwic3J5IiwibWFuIiwiZmlhbiIsImZpYSIsInZpYSIsImZpcm1hbiIsImRpbWFzIiwiYWRpbCIsImVwdW4iLCJ1bGluIiwidWZpayIsImluZSIsImluYSIsInNhbnRpIiwiZGV2aSIsIml0b2giLCJmaWsiLCJyb2ZpayIsImxpbWluIiwiaXBpbiIsIm1haCIsInNhZCIsIm5haCIsInlheWEiLCJpbWFuIiwiaW1hbSIsImRhdXMiLCJkYWgiLCJuaWgiLCJib3MiLCJkaXQiLCJhZGl0IiwiaW4iLCJ0YW4iLCdhbmRpJywnZHdpJywnbXVoYW1tYWQnLCdudXInLCdkZXdpJywndHJpJywnZGlhbicsJ3NyaScsJ3B1dHJpJywnZWthJywnc2FyaScsJ2FkaXR5YScsJ2Jhc3VraScsJ2J1ZGknLCdqb25pJywndG9uaScsJ2NhaHlhJywncmlza2knLCdmYXJoYW4nLCdhZGVuJywnam9rbycsJ2RpbWFzJywnaWZ1JywnYXNrJywnb3phbicsJ3phbicsJ3BpdCcsJ2hpJywnbmRhaCcsJ2ZhaCcsJ3VsJywnbmFuYScsJ25hbicsJ2RpZmEnLCdhbmRpa2EnLCdkaWsnLCdhcGEnLCdzcGEnLCdtYnVoJywna29lJywnYW5kcmUnLCdmaXQnLCdmaWZhJywndmlyYScsJ2FpcycsJ3BpcyddCiAgICAgICAgICAgICAgICAgICBkZXBhbiA9IFsic2F5IiwiYW1lbCIsInNpdGkiLCJvZmZpY2lhbCIsImRhcGl0IiwiemlkYW4iLCJyYW1kYW4iLCJoYW1kYW4iLCJudXJ1bCIsImthdHVsIiwiZmFkaWwiLCJkaWwiLCJoaSIsImNhbiIsInR6eSIsIndpYnUiLCJ6YSIsInphayIsInJveiIsIjMyIiwiMTYiLCIwOSIsIjI4IiwiaWRpaCIsIm1idWgiLCJzcGEiLCJhbWluIiwiZGVuIiwibWluIiwiYmFzIiwiYWJhcyIsInN1a2kiLCJ4ZCIsImZpY2lhbCIsImZpdHJpIiwiZGV3aSIsImRpdG8iLCJheml6IiwidGluaSIsIml0aWwiLCJwYWgiLCJ0ZXAiLCJuZGFoIiwicG8iLCIyNCIsInRpd2kiLCJidWRpIiwiYnVkIiwiYnVuIiwiZ29uZyIsInlhIiwiY29rIiwiamFuIiwiMzMyIiwiMDEiLCdhbmRpJywnZHdpJywnbXVoYW1tYWQnLCdudXInLCdkZXdpJywndHJpJywnZGlhbicsJ3NyaScsJ3B1dHJpJywnZWthJywnc2FyaScsJ2FkaXR5YScsJ2Jhc3VraScsJ2J1ZGknLCdqb25pJywndG9uaScsJ2NhaHlhJywncmlza2knLCdmYXJoYW4nLCdhZGVuJywnam9rbycsJ3JpbmEnLCd0aW5vJywncmlzYScsJ3NhJywncGluJywnY29rJywnaXlhJywncGknLCdtYWlsJywnZml6aScsJ2l0JywnaGFja2VyJywnd2lidScsJ2l5YW4nLCdyaW4nLCd0YW4nXQogICAgICAgICAgICAgICAgICAgYW5na2EgPSBbc3RyKHJhbmRvbS5jaG9pY2UoZGVwYW4pKSxzdHIocmFuZG9tLnJhbmRpbnQoMCwzMSkpLHN0cihyYW5kb20uY2hvaWNlKGJsa2FnKSksc3RyKHJhbmRvbS5yYW5kaW50KDAsNTApKV0KICAgICAgICAgICAgICAgICAgIGR1bXBwID0gIiVzJXMlcy8lcyIlKGkscmFuZG9tLmNob2ljZShhbmdrYSksbWFpbixpKQogICAgICAgICAgICAgICAgICAgaWYgZHVtcHAgaW4gSUQ6cGFzcwogICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgSUQuYXBwZW5kKGR1bXBwKQogICAgICAgICBBdHVyVXNlcigpCiAgICBlbGlmIGFzc2sgaW4gWyc1JywnMDUnXTpDZWtSZXN1bHRzKCkKICAgIGVsaWYgYXNzayBpbiBbJzYnLCcwNiddOkNoZWtPcHRpb24oKQogICAgZWxpZiBhc3NrIGluIFsnMCcsJzAwJ106b3Muc3lzdGVtKCdybSAtcmYgZGF0YS90b2tlbi50eHQgJiYgcm0gLXJmIGNva2llLnR4dCcpIDsgZXhpdCgwKQogICAgZWxzZTptZW51KCkKCmRlZiBBdHVyVXNlcigpOgogICAgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZidbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdKltib2xkIGdyZWVuXV0gW2JvbGQgd2hpdGVdVG90YWwgSWR6IFlhbmcgVGVya3VtcHVsIDoge2xlbihJRCl9Jyx0aXRsZT0nW2JvbGQgcmVkXVtbYm9sZCB3aGl0ZV0gdXNlcmlkIFtib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIGV4ZWMgPSAoJycnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTFbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBBa3VuIE9sZApbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMltib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIEFrdW4gTmV3Cltib2xkIGdyZWVuXVtbYm9sZCB3aGl0ZV0zW2JvbGQgZ3JlZW5dXS4gW2JvbGQgd2hpdGVdQ3JhY2sgQWt1biBSYW5kb20nJycpIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyAsIHRpdGxlPSdbYm9sZCByZWRdW1tib2xkIHdoaXRlXSBDcmFjayBBa3VuIFtib2xkIHJlZF1dJywgc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICAjenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdRGkgc2FyYW5rYW4gZnJvbSBJRCBuZXcnKQogICAgaWRuZGkgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggOiAnKQogICAgaWYgaWRuZGkgaW4gWycxJywnMDEnXToKICAgICAgICAgZm9yIGkgaW4gSUQ6CiAgICAgICAgICAgICAgIElEMi5hcHBlbmQoaSkKICAgIGVsaWYgaWRuZGkgaW4gWycyJywnMDInXToKICAgICAgICAgZm9yIGkgaW4gSUQ6CiAgICAgICAgICAgICBJRDIuaW5zZXJ0KDAsaSkKICAgIGVsc2U6CiAgICAgICAgIGZvciBpIGluIElEOgogICAgICAgICAgICAgeHggPSByYW5kb20ucmFuZGludCgwLCBsZW4oSUQyKSkKICAgICAgICAgICAgIElEMi5pbnNlcnQoeHgsIGkpCiAgICBBdHVyTG9naW4oKQoKZGVmIEF0dXJMb2dpbigpOgogICAgbWV0b2QgPSAoJycnW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTFbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIE1ldGhvZGUgVjEKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTJbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIE1ldGhvZGUgVjIKW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTNbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIE1ldGhvZGUgVmFsaWRhdGUgJycnKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKG1ldG9kLCB0aXRsZT0nW2JvbGQgcmVkXVtbYm9sZCB3aGl0ZV0gTWV0aG9kZSBbYm9sZCByZWRdXScsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCByZWRdamlrYSBhbmRhIGNsb25lIGVtYWlsIHRpZGFrIGRpIHNhcmFua2FuIG1lbWFrYWkgdmFsaWRhdGUhJykKICAgIHogPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdUGlsaWggOiAnKQogICAgaWYgeiBpbiBbJzEnLCcwMSddOnRvZC5hcHBlbmQoJ3JlZ3VsZXInKQogICAgZWxpZiB6IGluIFsnMicsJzAyJ106dG9kLmFwcGVuZCgncmVndWxlcnYyJykKICAgIGVsaWYgeiBpbiBbJzMnLCcwMyddOnRvZC5hcHBlbmQoJ3ZhbGlkYXRlJykKICAgIGVsc2U6dG9kLmFwcGVuZCgncmVndWxlcicpCgogICAgZXhlYyA9ICgnJydbYm9sZCBncmVlbl1bW2JvbGQgd2hpdGVdMVtib2xkIGdyZWVuXV0uIFtib2xkIHdoaXRlXUNyYWNrIERhcmkgZnJlZS5mYWNlYm9vay5jb20KW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTJbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIG1iYXNpYy5mYWNlYm9vay5jb20KW2JvbGQgZ3JlZW5dW1tib2xkIHdoaXRlXTNbYm9sZCBncmVlbl1dLiBbYm9sZCB3aGl0ZV1DcmFjayBEYXJpIG1vYmlsZS5mYWNlYm9vay5jb20nJycpIDsgQ29uc29sZSh3aWR0aD01MCkucHJpbnQoUGFuZWwoZXhlYyAsIHRpdGxlPSdbYm9sZCByZWRdW1tib2xkIHdoaXRlXSBTZXR0aW5nIFVybCBbYm9sZCByZWRdXScsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1TaWxha2FuIFBpbGloIFVybCBMb2dpbiBEaXNhcmFua2FuIChbYm9sZCBncmVlbl1mcmVlIFtib2xkIHdoaXRlXWF0YXUgW2JvbGQgeWVsbG93XW1vYmlsZVtib2xkIHdoaXRlXSknKQogICAgbGluayA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1QaWxpaCA6ICcpCiAgICBpZiBsaW5rIGluIFsnMScsJzAxJ106dXJsPSdmcmVlLmZhY2Vib29rLmNvbScKICAgIGVsaWYgbGluayBpbiBbJzInLCcwMiddOnVybD0nbWJhc2ljLmZhY2Vib29rLmNvbScKICAgIGVsc2U6dXJsPSdtLmZhY2Vib29rLmNvbScKCiAgICBwd2ggPSAoJ1tib2xkIHdoaXRlXUFwYWthaCBrYW11IGluZ2luIE1lbmd1YmFoIFBhc3N3b3JkIEFrdW4gW2JvbGQgZ3JlZW5dT0tbYm9sZCB3aGl0ZV0gU2FhdCBQcm9zZXMgQ3JhY2sgQmVyamFsYW4/JykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChwd2gsdGl0bGU9J1tib2xkIHJlZF1bW2JvbGQgd2hpdGVdIFBlcnRhbnlhYW5bYm9sZCByZWRdXScsc3R5bGU9J2JvbGQgcHVycGxlJykpCiAgICAjenByaW50KCfila3ilIDilIDilrggW2JvbGQgd2hpdGVdQW5kYWggYWthbiBtZW5ndWJhaCBwYXNzd29yZCB5L3QgJykKICAgIHViYWggPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdVGFtYmFoa2FuIFBhc3N3b3JkIE1hbnVhbCBbYm9sZCBncmVlbl1ZW2JvbGQgd2hpdGVdL1tib2xkIHJlZF10W2JvbGQgd2hpdGVdIDogJykKICAgIGlmIHViYWggaW4gWyd5JywnWScsJ2l5YSddOgogICAgICAgICAgVWJhaFB3LmFwcGVuZCgneWEnKQogICAgICAgICAgYWRkX1Bhc3N3b3JkID0gY29uc29sZS5pbnB1dCgn4pWw4pSA4pSA4pa4IFtib2xkIHdoaXRlXU1hc3VrYW4gcGFzc3dvcmQgYmFydSA6IFtib2xkIGdyZWVuXScpCiAgICAgICAgICBpZiBsZW4oYWRkX1Bhc3N3b3JkKSA8PTU6CiAgICAgICAgICAgICAgIGV4aXQoZidcbiB7Tn1be019w5d7Tn1dIHtLfVBhc3N3b3JkIGhhcnVzIGxlYmloIGRhcmkgNSBrYXJha3RhZXIgY29udG9oIDogcmF5YW5nYW50ZW5nLHJheWFuMTIzLGtoYW1kaWhpMTIzNDUnKQogICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgb3BlbigncGFzc3dvcmRfYmFydV9rYW11LnR4dCcsJ3cnKS53cml0ZShhZGRfUGFzc3dvcmQpCiAgICBlbHNlOlViYWhQdy5hcHBlbmQoJ25vJykKICAgIGl0aWwgPSAoJ1tib2xkIHdoaXRlXUFwYWthaCBrYW11IGluZ2luIG1lbmFtcGlsa2FuIG9wc2kgc2FhdCBwcm9zZXMgY3JhY2sgYmVyamFsYW4/JykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChpdGlsLHRpdGxlPSdbYm9sZCByZWRdW1tib2xkIHdoaXRlXSBQZXJ0YW55YWFuIFtib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgIyB6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1UYW1waWxrYW4gT3BzaSBDUCB5L3QnKQogICAgb3BzaSA9IGNvbnNvbGUuaW5wdXQoJ+KVsOKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1UYW1waWxrYW4gb3BzaSBDaGVja3BvaW50IFtib2xkIGdyZWVuXVlbYm9sZCB3aGl0ZV0vW2JvbGQgcmVkXXRbYm9sZCB3aGl0ZV0gOiAnKQogICAgaWYgb3BzaSBpbiBbJ3knLCdZJywnaXlhJ106T3BzaW5lLmFwcGVuZCgneWEnKQogICAgZWxzZTpPcHNpbmUuYXBwZW5kKCdubycpCgogICAgam1idCA9ICgnW2JvbGQgd2hpdGVdTWVuYW1waWxrYW4gQXBsaWthc2kgUGFkYSBBa3VuIFtib2xkIGdyZWVuXU9LW2JvbGQgd2hpdGVdIEFrYW4gTWVueWViYWJrYW4gQWt1biBUZXJrZW5hIFNlc2kgW2JvbGQgeWVsbG93XU5ldyBBdGF1IFNlc2kgW2JvbGQgcmVkXU1hdGkhW2JvbGQgd2hpdGVdJykgOyBDb25zb2xlKHdpZHRoPTUwKS5wcmludChQYW5lbChqbWJ0LHRpdGxlPSdbYm9sZCByZWRdWyBbYm9sZCB3aGl0ZV1rZXRlcmFuZ2FuIFtib2xkIHJlZF1dJyxzdHlsZT0nYm9sZCBwdXJwbGUnKSkKICAgICN6cHJpbnQoJ+KVreKUgOKUgOKWuCBbYm9sZCB3aGl0ZV1BbmRhaCBha2FuIG1lbmFtcGlsa2FuIGFwbGlrYXNpIHkvdCcpCiAgICBhcGsgPSBjb25zb2xlLmlucHV0KCfilbDilIDilIDilrggW2JvbGQgd2hpdGVdVGFtcGlsa2FuIEFwbGlrYXNpIFRlcmthaXQgW2JvbGQgZ3JlZW5dWVtib2xkIHdoaXRlXS9bYm9sZCByZWRddFtib2xkIHdoaXRlXSA6ICcpCiAgICBpZiBhcGsgaW4gWyd5JywnWScsJ2l5YSddOmFwbGlrYXNpLmFwcGVuZCgneWEnKQogICAgZWxzZTphcGxpa2FzaS5hcHBlbmQoJ3RpZGFrIGtvbnRvbCcpCiAgICBXb3JkbGlzdExvZ2luKCkucGFzc3dvcmQodXJsKQoKY2xhc3MgV29yZGxpc3RMb2dpbjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHBhc3N3b3JkKHNlbGYsbGluayk6CiAgICAgICAgZXhlYyA9IChmJ1tib2xkIHdoaXRlXUNSQUNLIFNUQVJURURbYm9sZCB3aGl0ZV1cbltib2xkIGdyZWVuXU9LIHNhdmUgaW4gOiBPSy97aW5kb30udHh0XG5bYm9sZCB5ZWxsb3ddQ1Agc2F2ZSBpbiA6IENQL3tpbmRvfS50eHRcbltib2xkIHJlZF1NYWlua2FuIE1vZGUgUGVzYXdhdCBLZXRpa2EgVGlkYWsgQWRhIEhhc2lsISFbYm9sZCB3aGl0ZV0nKSA7IENvbnNvbGUod2lkdGg9NTApLnByaW50KFBhbmVsKGV4ZWMgLHN0eWxlPSdib2xkIHB1cnBsZScpKSA7IHByaW50KCcgJykKICAgICAgICB3aXRoIGtoYW1kaWhpWFYobWF4X3dvcmtlcnM9MzApIGFzIGNvaWQ6CiAgICAgICAgICAgICBmb3IgVXNlckFrdW4gaW4gSUQyOgogICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICB1aWQsbmFtYSA9IFVzZXJBa3VuLnNwbGl0KCcvJykKICAgICAgICAgICAgICAgICAgICAgICAgIHRlcnNlcmFoID0gbmFtYS5zcGxpdCgnICcpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4obmFtYSkgPD01OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih0ZXJzZXJhaCkgPD0xIG9yIGxlbih0ZXJzZXJhaCkgPD0yOnBhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFt0ZXJzZXJhaCsnMTIzJywgdGVyc2VyYWgrJzEyMzQnLCB0ZXJzZXJhaCsnMTIzNDUnLHRlcnNlcmFoKyczMjEnLCdzYXlhbmcnLCdrYXRhIHNhbmRpJywnYmlzbWlsbGFoJyxuYW1hLmxvd2VyKCldCiAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtYSwgdGVyc2VyYWgrJzEyMycsIHRlcnNlcmFoKycxMjM0JywgdGVyc2VyYWgrJzEyMzQ1JywgdGVyc2VyYWgrJzMyMScsJ3NheWFuZycsJ2thdGEgc2FuZGknLCdiaXNtaWxsYWgnLG5hbWEubG93ZXIoKV0KICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdyZWd1bGVyJyBpbiB0b2Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2lkLnN1Ym1pdChzZWxmLmNyYWNreHYsIHVpZCwgcHd4LCBsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAndmFsaWRhdGUnIGluIHRvZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvaWQuc3VibWl0KHNlbGYuVmFsaWRhdGUsIHVpZCwgcHd4LCBsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAncmVndWxlcnYyJyBpbiB0b2Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2lkLnN1Ym1pdChzZWxmLmNyYWNreHYyLCB1aWQsIHB3eCwgbGluaykKICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2lkLnN1Ym1pdChzZWxmLmNyYWNreHYsIHVpZCwgcHd4LCBsaW5rKQogICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcwogICAgICAgIGV4aXQoZidcblxuIHtOfVt7SH3inJN7Tn1dIENyYWNrIFNlbGVzYWkge0h9T0s6e2xlbihPSyl9IHtLfUNQOntsZW4oQ1ApfScpCgogICAgZGVmIFVzZXJBZ2VudChzZWxmKToKICAgICAgICByZXR1cm4gcmFuZG9tLmNob2ljZShvcGVuKCJ1c2VyLnR4dCIsInIiKS5yZWFkKCkuc3BsaXRsaW5lcygpKQoKICAgIGRlZiBjcmFja3h2KHNlbGYsIHVzZXIsIHB3eCwgdXJsKToKICAgICAgICBnbG9iYWwgbG9vcCwgT0ssQ1AKICAgICAgICBwcmludChmJ1xyIFwwMzNbOTdtUkFZQU4tWEQgVjEge0h9e3VybH17Tn0ge2xvb3B9L3tsZW4oSUQyKX0ge0h9T0s6e2xlbihPSyl9IHtLfUNQOntsZW4oQ1ApfScsIGVuZD0nICcpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gcHd4OgogICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IHNlcy5nZXQoZidodHRwczovL3t1cmx9L2luZGV4LnBocD9uZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZvcGVuc2VhcmNoJTJGY29uZmlnLnhtbCcpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0geyJsc2QiOnJlLnNlYXJjaCgnbmFtZT0ibHNkIiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJtX3RzIjpyZS5zZWFyY2goJ25hbWU9Im1fdHMiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwibGkiOnJlLnNlYXJjaCgnbmFtZT0ibGkiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwidHJ5X251bWJlciI6IjAiLCJ1bnJlY29nbml6ZWRfdHJpZXMiOiIwIiwiZW1haWwiOnVzZXIsInBhc3MiOnB3LCJsb2dpbiI6Ik1hc3VrIn0KICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkID0geydIb3N0JzogdXJsLCdjb250ZW50LWxlbmd0aCc6ICcxMzUnLCdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsJ3NlYy1jaC11YSc6ICciIE5vdCBBO0JyYW5kIjt2PSI5OSIsICJDaHJvbWl1bSI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iOTkiJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciQW5kcm9pZCInLCdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsJ29yaWdpbic6ICdodHRwczovLycrdXJsLCdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywndXNlci1hZ2VudCc6IHVhLCdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45Jywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICduYXZpZ2F0ZScsJ3NlYy1mZXRjaC11c2VyJzogJz8xJywnc2VjLWZldGNoLWRlc3QnOiAnZG9jdW1lbnQnLCdyZWZlcmVyJzogZidodHRwczovL3t1cmx9L2luZGV4LnBocD9uZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZvcGVuc2VhcmNoJTJGY29uZmlnLnhtbCcsJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyxydTtxPTAuNixqdjtxPTAuNSd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zeiA9IHNlcy5wb3N0KGYnaHR0cHM6Ly97dXJsfS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGb3BlbnNlYXJjaCUyRmNvbmZpZy54bWwmYW1wO3JlZnNyYz1kZXByZWNhdGVkJmFtcDtsd3Y9MTAwJmFtcDtyZWZpZD04JyxkYXRhPWRhdGEsIGhlYWRlcnM9aGVhZCkKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnY191c2VyJyBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga3VlaCA9ICc7Jy5qb2luKFtzdHIoYSkrJz0nK3N0cihiKSBmb3IgYSxiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkID0gcmUuc2VhcmNoKCdjX3VzZXI9KC4qPyk7Jywga3VlaCkuZ3JvdXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzfCVzICAgICAgICAgICAgICAgICAgICAgICAnJShILHV1aWQscHcsa3VlaCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIFViYWhQdzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuVWJhaFBhc3N3b3JkKHV1aWQscHcsa3VlaCx1cmwpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3lhJyBpbiBhcGxpa2FzaToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2VrX2FwayhrdWVoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ09LL09LLXt9LnR4dCcuZm9ybWF0KGluZG8pLCdhJykud3JpdGUoJyVzfCVzfCVzXG4nJSh1c2VyLHB3LGt1ZWgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT0suYXBwZW5kKCdET1NBJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkID0gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKVsiY2hlY2twb2ludCJdLnNwbGl0KCIlIilbNF0ucmVwbGFjZSgiM0EiLCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd5YScgaW4gT3BzaW5lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXMgICAgICAgICAgICAgICAgICAgXHgxYlsxOzkxbSclKEssdXVpZCxwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDZWtPcHRpb25BY291bnQodXVpZCxwdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlcyAgICAgICAgICAgICAgICAgICBceDFiWzE7OTFtJyUoSyx1dWlkLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ0NQL0NQLXt9LnR4dCcuZm9ybWF0KGluZG8pLCdhJykud3JpdGUoJyVzfCVzXG4nJSh1dWlkLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENQLmFwcGVuZCgnVEFJJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOiB0aW1lLnNsZWVwKDMwKQogICAgICAgIGxvb3AgKz0xCgogICAgZGVmIFZhbGlkYXRlKHNlbGYsIHVzZXIsIHB3eCwgdXJsKToKICAgICAgICBnbG9iYWwgbG9vcCwgT0ssIENQCiAgICAgICAgcHJpbnQoZidcciBcMDMzWzk3bVJBWUFOLVhEIHtIfXt1cmx9e059IHtsb29wfS97bGVuKElEMil9IE9LOntsZW4oT0spfSBDUDp7bGVuKENQKX0nLCBlbmQ9JyAnKTsgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZm9yIHB3IGluIHB3eDoKICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeDoKICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VuID0gc2VsZi5Vc2VyQWdlbnQoKQogICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSB4LmdldCgnaHR0cHM6Ly97fS9sb2dpbi9kZXZpY2UtYmFzZWQvcGFzc3dvcmQvP3VpZD17fSZuZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZ3ZWJtYXN0ZXIlMkYmZmxvdz1sb2dpbl9ub19waW4mcmVmc3JjPWRlcHJlY2F0ZWQmX3JkcicuZm9ybWF0KHVybCx1c2VyKSkudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7J2xzZCc6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwnamF6b2VzdCc6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksJ3VpZCc6dXNlciwnbmV4dCc6J2h0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vd2VibWFzdGVyLycsJ2Zsb3cnOidsb2dpbl9ub19waW4nLCdlbmNwYXNzJzonI1BXRF9CUk9XU0VSOjA6e306e30nLmZvcm1hdChyYW5kb20ucmFuZGludCgwMDAwMDAwMDAwLCA5OTk5OTk5OTk5KSxwdyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZCA9IHsnSG9zdCc6IHVybCwnY29udGVudC1sZW5ndGgnOiAnMzE5JywnY2FjaGUtY29udHJvbCc6ICdtYXgtYWdlPTAnLCdzZWMtY2gtdWEnOiAnIiBOb3QgQTtCcmFuZCI7dj0iOTkiLCAiQ2hyb21pdW0iO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9Ijk5IicsJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzEnLCdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkFuZHJvaWQiJywndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywnb3JpZ2luJzogJ2h0dHBzOi8vJyArIHVybCwnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsJ3VzZXItYWdlbnQnOiBhZ2VuLCdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45Jywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICduYXZpZ2F0ZScsJ3NlYy1mZXRjaC11c2VyJzogJz8xJywnc2VjLWZldGNoLWRlc3QnOiAnZG9jdW1lbnQnLCdyZWZlcmVyJzogJ2h0dHBzOi8ve30vbG9naW4vZGV2aWNlLWJhc2VkL3Bhc3N3b3JkLz91aWQ9e30mbmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGd2VibWFzdGVyJTJGJmZsb3c9bG9naW5fbm9fcGluJnJlZnNyYz1kZXByZWNhdGVkJl9yZHInLmZvcm1hdCh1cmwsdXNlciksJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyxydTtxPTAuNixqdjtxPTAuNSd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaCA9IHgucG9zdCgnaHR0cHM6Ly97fS9sb2dpbi9kZXZpY2UtYmFzZWQvdmFsaWRhdGUtcGFzc3dvcmQvP3NoYmw9MCcuZm9ybWF0KHVybCksZGF0YT1kYXRhLCBoZWFkZXJzPWhlYWQsIGFsbG93X3JlZGlyZWN0cz1GYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnY191c2VyJyBpbiB4LmNvb2tpZXMuZ2V0X2RpY3QoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGt1ZWggPSAnOycuam9pbihbc3RyKGEpKyc9JytzdHIoYikgZm9yIGEsYiBpbiB4LmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQgPSByZS5zZWFyY2goJ2NfdXNlcj0oLio/KTsnLCBrdWVoKS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXN8JXMgICAgICAgICAgICAgJyUoSCx1dWlkLHB3LGt1ZWgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3lhJyBpbiBVYmFoUHc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlViYWhQYXNzd29yZCh1dWlkLHB3LGt1ZWgsdXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpwYXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIGFwbGlrYXNpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jZWtfYXBrKGt1ZWgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOnBhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ09LL09LLXt9LnR4dCcuZm9ybWF0KGluZG8pLCdhJykud3JpdGUoJyVzfCVzfCVzXG4nJSh1c2VyLHB3LGt1ZWgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT0suYXBwZW5kKCdET1NBIExVIEJBTkcgTUFMSU5HJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHguY29va2llcy5nZXRfZGljdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3lhJyBpbiBPcHNpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlcyAgICAgICAgICAgICAgICAgICBceDFiWzE7OTFtJyUoSyx1c2VyLHB3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENla09wdGlvbkFjb3VudCh1c2VyLHB3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzICAgICAgICAgICAgICAgICAgIFx4MWJbMTs5MW0nJShLLHVzZXIscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignQ1AvQ1Ate30udHh0Jy5mb3JtYXQoaW5kbyksJ2EnKS53cml0ZSgnJXN8JXNcbiclKHVzZXIscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1AuYXBwZW5kKCdUQUkgS1VOSU5HJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6IHRpbWUuc2xlZXAoMzUpCiAgICAgICAgbG9vcCArPTEKCiAgICAjIExPR0lOIFJFR1VMRVIgVjIKICAgIGRlZiBjcmFja3h2MihzZWxmLCB1c2VyLCBwd3gsIHVybCk6CiAgICAgICAgZ2xvYmFsIGxvb3AsT0ssQ1AKICAgICAgICBwcmludChmJ1xyIFwwMzNbOTdtUkFZQU4tWEQgVjIge0h9e3VybH17Tn0ge2xvb3B9L3tsZW4oSUQyKX0ge0h9T0s6e2xlbihPSyl9IHtLfUNQOntsZW4oQ1ApfScsIGVuZD0nICcpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gcHd4OgogICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbiA9IHVhCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IHJlcXVlc3RzLmdldChmJ2h0dHBzOi8ve3VybH0vbG9naW4vP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRndlYm1hc3RlciUyRiZyZWY9ZGJsJmZsJmxvZ2luX2Zyb21fYXltaD0xJykudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7ImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBsaW5rKS5ncm91cCgxKSwiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgbGluaykuZ3JvdXAoMSksIm1fdHMiOnJlLnNlYXJjaCgnbmFtZT0ibV90cyIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJsaSI6cmUuc2VhcmNoKCduYW1lPSJsaSIgdmFsdWU9IiguKj8pIicsIGxpbmspLmdyb3VwKDEpLCJ0cnlfbnVtYmVyIjoiMCIsInVucmVjb2duaXplZF90cmllcyI6IjAiLCJlbWFpbCI6dXNlciwicGFzcyI6cHcsImxvZ2luIjoiTWFzdWsifQogICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQgPSB7J0hvc3QnOiB1cmwsJ2NvbnRlbnQtbGVuZ3RoJzogJzIxNTInLCd4LWZiLWxzZCc6IGRhdGFbJ2xzZCddLCdzZWMtY2gtdWEtbW9iaWxlJzogJz8xJywndXNlci1hZ2VudCc6IGFnZW4sJ3NlYy1jaC11YSc6ICciIE5vdCBBO0JyYW5kIjt2PSI5OSIsICJDaHJvbWl1bSI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iOTkiJywnc2VjLWNoLXVhLXBsYXRmb3JtJzogJyJBbmRyb2lkIicsJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCdhY2NlcHQnOiAnKi8qJywnb3JpZ2luJzogJ2h0dHBzOi8vJyArIHVybCwnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICdjb3JzJywnc2VjLWZldGNoLWRlc3QnOiAnZW1wdHknLCdyZWZlcmVyJzogJ2h0dHBzOi8ve30vbG9naW4vP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRndlYm1hc3RlciUyRiZyZWY9ZGJsJmZsJmxvZ2luX2Zyb21fYXltaD0xJy5mb3JtYXQodXJsKSwnYWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43LHJ1O3E9MC42LGp2O3E9MC41J30KICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NoID0gc2VzLnBvc3QoZidodHRwczovL3t1cmx9L2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9uZXh0PWh0dHBzJTNBJTJGJTJGZGV2ZWxvcGVycy5mYWNlYm9vay5jb20lMkZ3ZWJtYXN0ZXIlMkYmYW1wO3JlZnNyYz1kZXByZWNhdGVkJmFtcDtsd3Y9MTAwJmFtcDtyZWY9ZGJsJywgZGF0YT1kYXRhLGhlYWRlcnM9aGVhZCxhbGxvd19yZWRpcmVjdHM9RmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2NfdXNlcicgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGt1ZWggPSAnOycuam9pbihbc3RyKGEpKyc9JytzdHIoYikgZm9yIGEsYiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA9IHJlLnNlYXJjaCgnY191c2VyPSguKj8pOycsIGt1ZWgpLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgwrvCuyAlc3wlc3wlcyAgICAgICAgICAgICAgICAgICAgICAgJyUoSCx1dWlkLHB3LGt1ZWgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3lhJyBpbiBVYmFoUHc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlViYWhQYXNzd29yZCh1dWlkLHB3LGt1ZWgsdXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpwYXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIGFwbGlrYXNpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jZWtfYXBrKGt1ZWgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOnBhc3MKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCdPSy9PSy17fS50eHQnLmZvcm1hdChpbmRvKSwnYScpLndyaXRlKCclc3wlc3wlc1xuJyUodXNlcixwdyxrdWVoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9LLmFwcGVuZCgnRE9TQScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCA9IHNlcy5jb29raWVzLmdldF9kaWN0KClbImNoZWNrcG9pbnQiXS5zcGxpdCgiJSIpWzRdLnJlcGxhY2UoIjNBIiwgIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAneWEnIGluIE9wc2luZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyDCu8K7ICVzfCVzICAgICAgICAgICAgICAgICAgIFx4MWJbMTs5MW0nJShLLHV1aWQscHcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2VrT3B0aW9uQWNvdW50KHV1aWQscHcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzIMK7wrsgJXN8JXMgICAgICAgICAgICAgICAgICAgXHgxYlsxOzkxbSclKEssdXVpZCxwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCdDUC9DUC17fS50eHQnLmZvcm1hdChpbmRvKSwnYScpLndyaXRlKCclc3wlc1xuJyUodXVpZCxwdykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUC5hcHBlbmQoJ1RBSScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjogdGltZS5zbGVlcCgzMCkKICAgICAgICBsb29wICs9MQoKICAgIGRlZiBVYmFoUGFzc3dvcmQoc2VsZiwgdXNlciwgcGFzc3dvcmRfb2xkLCBjb2tpLCB1cmwpOgogICAgICAgIHRyeTpwYXNzd29yZF9uZXcgPSBvcGVuKCdwYXNzd29yZF9iYXJ1X2thbXUudHh0JywncicpLnJlYWQoKQogICAgICAgIGV4Y2VwdDpwYXNzd29yZF9uZXcgPSBwYXNzd29yZF9vbGQKICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6CiAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBzZXMuZ2V0KGYnaHR0cHM6Ly97dXJsfS9zZXR0aW5ncy9zZWN1cml0eS9wYXNzd29yZC8nLGNvb2tpZXM9eydjb29raWUnOmNva2l9KQogICAgICAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgJ2ZiX2R0c2cnOnJlLnNlYXJjaCgnbmFtZT0iZmJfZHRzZyIgdmFsdWU9IiguKj8pIicsIGxpbmsudGV4dCkuZ3JvdXAoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAnamF6b2VzdCc6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgbGluay50ZXh0KS5ncm91cCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZF9jaGFuZ2Vfc2Vzc2lvbl9pZGVudGlmaWVyJzpyZS5zZWFyY2goJ25hbWU9InBhc3N3b3JkX2NoYW5nZV9zZXNzaW9uX2lkZW50aWZpZXIiIHZhbHVlPSIoLio/KSInLCBsaW5rLnRleHQpLmdyb3VwKDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkX29sZCc6cGFzc3dvcmRfb2xkLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkX25ldyc6cGFzc3dvcmRfbmV3LAogICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkX2NvbmZpcm0nOnBhc3N3b3JkX25ldywKICAgICAgICAgICAgICAgICAgICAgICAgICdzYXZlJzonU2ltcGFuIHBlcnViYWhhbicKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICBmaW5kID0gcGFyc2UobGluay50ZXh0LCdodG1sLnBhcnNlcicpLmZpbmQoJ2Zvcm0nLG1ldGhvZD0ncG9zdCcpWydhY3Rpb24nXQogICAgICAgICAgICAgICAgICAgICBwb3NoID0gc2VzLnBvc3QoZidodHRwczovL3t1cmx9JyArIGZpbmQsIGRhdGE9ZGF0YSwgY29va2llcyA9IHsnY29va2llJzpjb2tpfSkKICAgICAgICAgICAgICAgICAgICAgaWYgJ0thdGEgU2FuZGkgVGVsYWggRGl1YmFoJyBpbiBwb3NoLnRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyICVzICAg4oCiICVzQmVyaGFzaWwgbWVuZ3ViYWggcGFzc3dvcmQnJShILE4pKQogICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcciAlcyAgIOKAoiAlc0dhZ2FsIG1lbmd1YmFoIHBhc3N3b3JkJyUoTSxOKSkKICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwcmludCgnXHIgJXMgICDigKIgJXNHYWdhbCBtZW5ndWJhaCBwYXNzd29yZCclKE0sTikpCgogICAgZGVmIGNla19hcGsoc2VsZixrdWtpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgICAgIGFrdGlmLGthZGFybHVhcnNhID0gMCwwCiAgICAgICAgICAgICAgIGNva2kgPSB7ImNvb2tpZSI6J25vc2NyaXB0PTE7JyArIGt1a2l9CiAgICAgICAgICAgICAgIGxpbmsgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWFjdGl2ZSIsY29va2llcz1jb2tpKQogICAgICAgICAgICAgICBwYXJ6ID0gcGFyc2UobGluay50ZXh0LCJodG1sLnBhcnNlciIpCiAgICAgICAgICAgICAgIGRpaGkgPSBwYXJ6LmZpbmQoImZvcm0iLG1ldGhvZD0icG9zdCIpCiAgICAgICAgICAgICAgIGNhcmkgPSBba29udG9sLnRleHQgZm9yIGtvbnRvbCBpbiBkaWhpLmZpbmRfYWxsKCJoMyIpXQogICAgICAgICAgICAgICBpZiBsZW4oY2FyaSkgPT0gMDoKICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgICDigKIgJXNUaWRhayBhZGEgYXBsaWthc2kgYWt0aWYgICAgICAgICAgICAgICAgICAgICAlcyclKE0sUCwgJyAnKSkKICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmb3IgbWVtZWsgaW4gcmFuZ2UobGVuKGNhcmkpKToKICAgICAgICAgICAgICAgICAgICAgICAgYWt0aWYgKz0xCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcciAgICAgJXMlcy4gJXMlcyIlKEgsYWt0aWYsUCxjYXJpW21lbWVrXS5yZXBsYWNlKCJEaXRhbWJhaGthbiBwYWRhIiwiIERpdGFtYmFoa2FuIHBhZGEiKSkpCgogICAgICAgICAgICAgICBwcmludCgnICcpCiAgICAgICAgICAgICAgIGxpbmsgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWluYWN0aXZlIixjb29raWVzPWNva2kpCiAgICAgICAgICAgICAgIHBhcnogPSBwYXJzZShsaW5rLnRleHQsImh0bWwucGFyc2VyIikKICAgICAgICAgICAgICAgZGloaSA9IHBhcnouZmluZCgiZm9ybSIsbWV0aG9kPSJwb3N0IikKICAgICAgICAgICAgICAgY2FyaSA9IFtrb250b2wudGV4dCBmb3Iga29udG9sIGluIGRpaGkuZmluZF9hbGwoImgzIildCiAgICAgICAgICAgICAgIGlmIGxlbihjYXJpKSA9PSAwOgogICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIgJXMgICDigKIgJXNUaWRhayBhZGEgYXBsaWthc2kga2FkYXJsdWFyc2EgICAgICVzJyUoTSxQLCAnICcpKQogICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICBmb3IgbWVtZWsgaW4gcmFuZ2UobGVuKGNhcmkpKToKICAgICAgICAgICAgICAgICAgICAgICAgIGthZGFybHVhcnNhICs9MQogICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyICAgICAlcyVzLiAlcyVzIiUoTSxrYWRhcmx1YXJzYSxQLGNhcmlbbWVtZWtdLnJlcGxhY2UoIktlZGFsdXdhcnNhIiwiIEtlZGFsdXdhcnNhIikpKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwcmludChmJ1xyICAgICB7TX0hIHtQfVRpZGFrIGRhcGF0IG1lbmdlY2hlayBhcGxpa2FzaSBha3RpZiBkYW4ga2FkYXJsdWFyc2EhICAgIAkJJykKCmRlZiBmb2xkZXIoKToKICAgIHRyeTpvcy5ta2RpcignT0snKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeTpvcy5ta2RpcignQ1AnKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeTpvcy5ta2RpcignZGF0YScpCiAgICBleGNlcHQ6cGFzcwoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKIwlvcy5zeXN0ZW0oJ2dpdCBwdWxsJykKCWZvbGRlcigpCiMJQXBpa2V5TG9naW4oKQoJbWVudSgpCg=='))